(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6833053a"],{"0a49":function(s,e,t){var n=t("9b43"),o=t("626a"),a=t("4bf8"),i=t("9def"),c=t("cd1c");s.exports=function(s,e){var t=1==s,l=2==s,r=3==s,u=4==s,d=6==s,f=5==s||d,h=e||c;return function(e,c,p){for(var v,g,b=a(e),C=o(b),_=n(c,p,3),y=i(C.length),I=0,m=t?h(e,y):l?h(e,0):void 0;y>I;I++)if((f||I in C)&&(v=C[I],g=_(v,I,b),s))if(t)m[I]=g;else if(g)switch(s){case 3:return!0;case 5:return v;case 6:return I;case 2:m.push(v)}else if(u)return!1;return d?-1:r||u?u:m}}},1169:function(s,e,t){var n=t("2d95");s.exports=Array.isArray||function(s){return"Array"==n(s)}},"20d6":function(s,e,t){"use strict";var n=t("5ca1"),o=t("0a49")(6),a="findIndex",i=!0;a in[]&&Array(1)[a](function(){i=!1}),n(n.P+n.F*i,"Array",{findIndex:function(s){return o(this,s,arguments.length>1?arguments[1]:void 0)}}),t("9c6c")(a)},2209:function(s,e,t){},"2f21":function(s,e,t){"use strict";var n=t("79e5");s.exports=function(s,e){return!!s&&n(function(){e?s.call(null,function(){},1):s.call(null)})}},"2fdb":function(s,e,t){"use strict";var n=t("5ca1"),o=t("d2c8"),a="includes";n(n.P+n.F*t("5147")(a),"String",{includes:function(s){return!!~o(this,s,a).indexOf(s,arguments.length>1?arguments[1]:void 0)}})},"4ec4":function(s,e,t){"use strict";var n=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("el-select",{attrs:{value:s.$t(s.typeName+"."+s.value)},on:{input:function(e){return s.change(e)}}},s._l(s.typeOptions,function(e){return t("el-option",{key:e.value,attrs:{label:s.$t(s.typeName+"."+e.label),value:e.value}})}),1)},o=[],a={props:{value:{default:0},typeOptions:{type:Array,default:function(){return[{value:"0",label:"0"},{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"100",label:"100"},{value:"101",label:"101"},{value:"102",label:"102"},{value:"103",label:"103"},{value:"104",label:"104"}]}},typeName:{type:String,default:"type"}},methods:{change:function(s){this.$emit("change",s)}}},i=a,c=t("2877"),l=Object(c["a"])(i,n,o,!1,null,null,null);e["a"]=l.exports},5147:function(s,e,t){var n=t("2b4c")("match");s.exports=function(s){var e=/./;try{"/./"[s](e)}catch(t){try{return e[n]=!1,!"/./"[s](e)}catch(o){}}return!0}},"55dd":function(s,e,t){"use strict";var n=t("5ca1"),o=t("d8e8"),a=t("4bf8"),i=t("79e5"),c=[].sort,l=[1,2,3];n(n.P+n.F*(i(function(){l.sort(void 0)})||!i(function(){l.sort(null)})||!t("2f21")(c)),"Array",{sort:function(s){return void 0===s?c.call(a(this)):c.call(a(this),o(s))}})},"5d6b":function(s,e,t){var n=t("e53d").parseInt,o=t("a1ce").trim,a=t("e692"),i=/^[-+]?0[xX]/;s.exports=8!==n(a+"08")||22!==n(a+"0x16")?function(s,e){var t=o(String(s),3);return n(t,e>>>0||(i.test(t)?16:10))}:n},"64c7":function(s,e,t){"use strict";var n=t("2209"),o=t.n(n);o.a},6762:function(s,e,t){"use strict";var n=t("5ca1"),o=t("c366")(!0);n(n.P,"Array",{includes:function(s){return o(this,s,arguments.length>1?arguments[1]:void 0)}}),t("9c6c")("includes")},7445:function(s,e,t){var n=t("63b6"),o=t("5d6b");n(n.G+n.F*(parseInt!=o),{parseInt:o})},"9c6c":function(s,e,t){var n=t("2b4c")("unscopables"),o=Array.prototype;void 0==o[n]&&t("32e9")(o,n,{}),s.exports=function(s){o[n][s]=!0}},a1ce:function(s,e,t){var n=t("63b6"),o=t("25eb"),a=t("294c"),i=t("e692"),c="["+i+"]",l="​",r=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),d=function(s,e,t){var o={},c=a(function(){return!!i[s]()||l[s]()!=l}),r=o[s]=c?e(f):i[s];t&&(o[t]=r),n(n.P+n.F*c,"String",o)},f=d.trim=function(s,e){return s=String(o(s)),1&e&&(s=s.replace(r,"")),2&e&&(s=s.replace(u,"")),s};s.exports=d},aae3:function(s,e,t){var n=t("d3f4"),o=t("2d95"),a=t("2b4c")("match");s.exports=function(s){var e;return n(s)&&(void 0!==(e=s[a])?!!e:"RegExp"==o(s))}},b9e9:function(s,e,t){t("7445"),s.exports=t("584a").parseInt},c5cc:function(s,e,t){"use strict";t.r(e);var n=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"consensus bg-gray"},[t("h3",{staticClass:"title"},[s._v("\n    "+s._s(s.addressInfo.address)+"\n    "),t("span",{directives:[{name:"show",rawName:"v-show",value:s.addressInfo.alias,expression:"addressInfo.alias"}]},[s._v(" | "+s._s(s.addressInfo.alias))]),t("i",{staticClass:"iconfont icon-fuzhi clicks",on:{click:function(e){return s.copy(s.addressInfo.address)}}})]),t("div",{staticClass:"card w1200"},[t("div",{staticClass:"card-info left fl"},[t("h5",{staticClass:"card-title font18"},[s._v(s._s(s.$t("consensus.consensus0")))]),t("ul",[t("li",[s._v("\n          "+s._s(s.$t("consensus.consensus3"))+"\n          "),t("label",[s._v(s._s(s.addressInfo.totalReward)),t("span",{staticClass:"fCN"},[s._v(s._s(s.addressInfo.symbol))])])]),t("li",[s._v("\n          "+s._s(s.$t("consensus.consensus2"))+"\n          "),t("label",[s._v(s._s(s.addressInfo.balance)),t("span",{staticClass:"fCN"},[s._v(s._s(s.addressInfo.symbol))])])]),t("li",[s._v("\n          "+s._s(s.$t("consensus.consensus1"))+"\n          "),t("label",[t("u",{staticClass:"click",on:{click:function(e){return s.toUrl("consensusList")}}},[s._v(s._s(s.addressInfo.consensusLock))]),t("span",{staticClass:"fCN"},[s._v(s._s(s.agentAsset.agentAsset.symbol))])])])])]),t("div",{staticClass:"card-info right fr"},[t("h5",{staticClass:"card-title font18"},[s._v("\n        "+s._s(s.$t("consensus.consensus4"))+"\n        "),t("span",{directives:[{name:"show",rawName:"v-show",value:!s.isNew&&!s.isRed,expression:"!isNew && !isRed"}],staticClass:"font16 click fr",on:{click:function(e){return s.toUrl("newConsensus")}}},[s._v("\n          "+s._s(s.$t("consensus.consensus5"))+"\n        ")])]),t("ul",[t("li",[s._v("\n          "+s._s(s.$t("consensus.consensus8"))+"\n          "),t("label",[s._v(s._s(s.nulsCount.consensusTotal)),t("span",{staticClass:"fCN"},[s._v(s._s(s.agentAsset.agentAsset.symbol))])])]),t("li",[s._v(s._s(s.$t("consensus.consensus7"))+" "),t("label",[s._v(s._s(s.nodeCount.totalCount))])]),t("li",[s._v(s._s(s.$t("consensus.consensus6"))+" "),t("label",[s._v(s._s(s.nodeCount.agentCount))])])])])]),t("div",{staticClass:"cb"}),t("el-tabs",{staticClass:"w1200",on:{"tab-click":s.handleClick},model:{value:s.consensusActive,callback:function(e){s.consensusActive=e},expression:"consensusActive"}},[t("el-tab-pane",{attrs:{label:s.$t("consensus.consensus9"),name:"consensusFirst"}},[t("div",{staticClass:"filter"},[t("SelectBar",{attrs:{typeOptions:s.nodeStatusOptions,typeName:"nodeStatus"},on:{change:s.changeNodeStatus},model:{value:s.nodeStatusRegion,callback:function(e){s.nodeStatusRegion=e},expression:"nodeStatusRegion"}}),t("SelectBar",{attrs:{typeOptions:s.nodeTypeOptions,typeName:"nodeType"},on:{change:s.changeNodeType},model:{value:s.nodeTypeRegion,callback:function(e){s.nodeTypeRegion=e},expression:"nodeTypeRegion"}}),t("el-input",{staticClass:"search",attrs:{placeholder:s.$t("consensus.consensus10"),"suffix-icon":"el-icon-search"},model:{value:s.searchValue,callback:function(e){s.searchValue=e},expression:"searchValue"}},[t("i",{staticClass:"iconfont icon-search_icon fr click"})])],1),t("div",{staticClass:"node"},[s._l(s.searchData,function(e){return t("div",{key:e.agentId,staticClass:"node_info"},[t("h4",{staticClass:"bg-gray"},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.isNew,expression:"item.isNew"}],staticClass:"iconfont iconwo"}),s._v(" \n            "),t("span",{staticClass:"uppercase"},[s._v(s._s(e.agentId))]),s._v(" \n            "),t("i",{staticClass:"iconfont",class:0===e.status?"icondaigongshi fred":"icongongshizhong fCN"}),t("i",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"follow clicks",class:e.isCollect?"el-icon-star-on fCN":"el-icon-star-off",on:{click:function(t){return s.collect(e.agentId)}}})]),t("ul",{staticClass:"bg-white click",on:{click:function(t){return s.toUrl("consensusInfo",e.txHash)}}},[t("li",[s._v(s._s(s.$t("public.alias"))),t("span",[s._v(s._s(e.agentAlias))])]),t("li",[s._v(s._s(s.$t("public.commission"))+" "),t("span",[s._v(s._s(e.commissionRate)+"%")])]),t("li",[s._v(s._s(s.$t("public.totalStake"))),t("span",[s._v(s._s(e.totalDeposit))])]),t("li",[s._v(s._s(s.$t("public.participants"))),t("span",[s._v(s._s(e.depositCount))])]),t("li",[s._v(s._s(s.$t("public.deposit"))),t("span",[s._v(s._s(e.deposit))])]),t("li",[s._v(s._s(s.$t("public.credit"))),t("span",[s._v(s._s(e.creditValue))])])])])}),t("div",{staticClass:"cb"})],2)]),t("el-tab-pane",{attrs:{label:s.$t("consensus.consensus11"),name:"consensusSecond"}},[t("div",{staticClass:"node"},[s._l(s.myNodeData,function(e){return t("div",{key:e.agentId,staticClass:"node_info"},[t("h4",{staticClass:"bg-gray"},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.isNew,expression:"item.isNew"}],staticClass:"iconfont iconwo"}),s._v(" \n            "),t("span",{staticClass:"uppercase"},[s._v(s._s(e.agentId))]),s._v(" \n            "),t("i",{staticClass:"iconfont",class:0===e.status?"icondaigongshi fred":"icongongshizhong fCN"}),t("i",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"follow el-icon-star-off"})]),t("ul",{staticClass:"bg-white click",on:{click:function(t){return s.toUrl("consensusInfo",e.txHash)}}},[t("li",[s._v(s._s(s.$t("public.alias"))),t("span",[s._v(s._s(e.agentAlias))])]),t("li",[s._v(s._s(s.$t("public.commission"))+" "),t("span",[s._v(s._s(e.commissionRate)+"%")])]),t("li",[s._v(s._s(s.$t("public.totalStake"))),t("span",[s._v(s._s(e.totalDeposit))])]),t("li",[s._v(s._s(s.$t("public.participants"))),t("span",[s._v(s._s(e.depositCount))])]),t("li",[s._v(s._s(s.$t("public.deposit"))),t("span",[s._v(s._s(e.deposit))])]),t("li",[s._v(s._s(s.$t("public.credit"))),t("span",[s._v(s._s(e.creditValue))])])])])}),t("div",{staticClass:"cb"})],2)])],1)],1)},o=[],a=(t("7f7f"),t("55dd"),t("c5f6"),t("e814")),i=t.n(a),c=(t("20d6"),t("6762"),t("2fdb"),t("5d73")),l=t.n(c),r=t("f499"),u=t.n(r),d=(t("96cf"),t("3b8d")),f=t("a4bb"),h=t.n(f),p=t("4ec4"),v=t("6ace"),g={name:"consensus",data:function(){return{consensusActive:"consensusFirst",nodeCount:{agentCount:0,totalCount:0},nulsCount:{consensusTotal:0},nodeTypeOptions:[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],nodeTypeRegion:0,nodeStatusOptions:[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"}],nodeStatusRegion:0,searchValue:"",allNodeData:[],addressInfo:[],agentAsset:JSON.parse(sessionStorage.getItem("info")),isRed:!1,isNew:!1,pageIndex:1,pageSize:500,pageTotal:0,myNodeData:[],setInterval:null}},components:{SelectBar:p["a"]},created:function(){var s=this;this.addressInfo=Object(v["e"])(1),setInterval(function(){s.addressInfo=Object(v["e"])(1)},500),this.getConsensusNodeCount(),this.getCoinInfo()},mounted:function(){this.getConsensusNodes(this.pageIndex,this.pageSize,this.nodeTypeRegion),this.getConsensusInfoByAddress(this.pageIndex,this.pageSize,this.addressInfo.address),this.getAddressInfoByNode(this.addressInfo),this.getPunishByAddress(this.addressInfo.address)},destroyed:function(){clearInterval(this.setInterval)},computed:{searchData:function(){var s=this.searchValue;return s?this.allNodeData.filter(function(e){return h()(e).some(function(t){return String(e[t]).toLowerCase().indexOf(s.toLowerCase())>-1})}):this.allNodeData}},watch:{addressInfo:function(s,e){s.address!==e.address&&e.address&&(this.isNew=!1,this.getPunishByAddress(this.addressInfo.address),this.getConsensusNodeCount(),this.getCoinInfo(),this.getConsensusNodes(this.pageIndex,this.pageSize,this.nodeTypeRegion),this.getConsensusInfoByAddress(this.pageIndex,this.pageSize,this.addressInfo.address))}},methods:{getPunishByAddress:function(s){var e=this;this.$post("/","getPunishList",[1,1,2,s]).then(function(s){0!==s.result.list.length?e.isRed=!0:e.isRed=!1}).catch(function(s){e.$message({message:e.$t("public.err3")+s,type:"error",duration:1e3})})},getAddressInfoByNode:function(){var s=Object(d["a"])(regeneratorRuntime.mark(function s(e){return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,this.$post("/","getAccount",[e.address]).then(function(s){if(s.hasOwnProperty("result")){var t=Object(v["e"])(0),n=!0,o=!1,a=void 0;try{for(var i,c=l()(t);!(n=(i=c.next()).done);n=!0){var r=i.value;r.address===e.address&&(r.alias=s.result.alias,r.symbol=s.result.symbol,r.balance=Object(v["o"])(s.result.balance),r.consensusLock=Object(v["o"])(s.result.consensusLock),r.totalReward=Object(v["o"])(s.result.totalReward),r.totalIn=Object(v["o"])(s.result.totalIn),r.totalOut=Object(v["o"])(s.result.totalOut))}}catch(d){o=!0,a=d}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}localStorage.setItem(Object(v["g"])(),u()(t))}}).catch(function(s){console.log("getAccount:"+s)});case 2:case"end":return s.stop()}},s,this)}));function e(e){return s.apply(this,arguments)}return e}(),getConsensusNodeCount:function(){var s=this;this.$post("/","getConsensusNodeCount",[]).then(function(e){e.hasOwnProperty("result")?s.nodeCount=e.result:(s.nodeCount.agentCount=0,s.nodeCount.totalCount=0)}).catch(function(e){s.nodeCount.agentCount=0,s.nodeCount.totalCount=0,console.log("getConsensusNodeCount:"+e)})},getCoinInfo:function(){var s=this;this.$post("/","getCoinInfo",[]).then(function(e){e.hasOwnProperty("result")?(s.nulsCount.circulation=Object(v["o"])(e.result.circulation),s.nulsCount.consensusTotal=Object(v["o"])(e.result.consensusTotal),s.nulsCount.total=Object(v["o"])(e.result.total)):(s.nulsCount.circulation=0,s.nulsCount.consensusTotal=0,s.nulsCount.total=0)}).catch(function(e){s.nulsCount.circulation=0,s.nulsCount.consensusTotal=0,s.nulsCount.total=0,console.log("getCoinInfo:"+e)})},getConsensusNodes:function(s,e,t){var n=this;this.$post("/","getConsensusNodes",[s,e,t]).then(function(s){if(s.hasOwnProperty("result")){n.addressInfo.collectList||(n.addressInfo.collectList=[]);var e=!0,t=!1,o=void 0;try{for(var a,i=l()(s.result.list);!(e=(a=i.next()).done);e=!0){var c=a.value;n.addressInfo.collectList.includes(c.agentId)?c.isCollect=!0:c.isCollect=!1,c.bozhengjin=c.deposit,c.deposit=Object(v["o"])(c.deposit),c.agentReward=Object(v["o"])(c.agentReward),c.totalDeposit=Object(v["o"])(c.totalDeposit),c.totalReward=Object(v["o"])(c.totalReward),c.agentAddress===n.addressInfo.address?c.isNew=!0:c.isNew=!1}}catch(r){t=!0,o=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw o}}n.allNodeData=s.result.list}}).catch(function(s){console.log("getConsensusNodes:"+s)})},collect:function(s){if(this.addressInfo.collectList){this.addressInfo.collectList.includes(s)?this.addressInfo.collectList.splice(this.addressInfo.collectList.findIndex(function(e){return e===s}),1):this.addressInfo.collectList.push(s);var e=!0,t=!1,n=void 0;try{for(var o,a=l()(this.allNodeData);!(e=(o=a.next()).done);e=!0){var i=o.value;this.addressInfo.collectList.includes(i.agentId)?i.isCollect=!0:i.isCollect=!1}}catch(c){t=!0,n=c}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}else this.addressInfo.collectList=[];sessionStorage.setItem(this.addressInfo.address,u()(this.addressInfo)),localStorage.setItem(this.addressInfo.address,u()(this.addressInfo))},getConsensusInfoByAddress:function(s,e,t){var n=this;this.$post("/","getAccountConsensus",[s,e,t]).then(function(s){if(s.hasOwnProperty("result")){var e=!0,t=!1,o=void 0;try{for(var a,i=l()(s.result.list);!(e=(a=i.next()).done);e=!0){var c=a.value;c.deposit=Object(v["o"])(c.deposit),c.totalDeposit=Object(v["o"])(c.totalDeposit),c.totalReward=Object(v["o"])(c.totalReward),c.agentAddress===n.addressInfo.address?(c.isNew=!0,n.isNew=!0):(c.isNew=!1,n.isNew=!1)}}catch(r){t=!0,o=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw o}}n.myNodeData=s.result.list}}).catch(function(s){console.log("getAccountConsensus:"+s)})},changeNodeStatus:function(s){this.nodeStatusRegion=s,this.getConsensusNodes(this.pageIndex,this.pageSize,this.nodeStatusRegion)},changeNodeType:function(s){switch(this.nodeTypeRegion=i()(s),s){case 1:this.nodeTypeSort(this.allNodeData,"creditValue");break;case 2:this.nodeTypeSort(this.allNodeData,"commissionRate");break;case 3:this.nodeTypeSort(this.allNodeData,"totalDeposit");break;case 4:this.nodeTypeSort(this.allNodeData,"bozhengjin");break;default:this.getConsensusNodes(this.pageIndex,this.pageSize,this.nodeStatusRegion)}},nodeTypeSort:function(s,e){var t=function(s){return function(e,t){var n=e[s],o=t[s];return isNaN(Number(n))||isNaN(Number(o))||(n=Number(n),o=Number(o)),n>o?-1:n<o?1:0}};return s.sort(t(e))},toUrl:function(s,e){var t={};t="consensusInfo"===s?{hash:e}:{},this.$router.push({name:s,query:t})},copy:function(s){Object(v["i"])(s),this.$message({message:this.$t("public.copySuccess"),type:"success",duration:1e3})},handleClick:function(s){this.consensusActive=s.name,"consensusFirst"===s.name?this.getConsensusNodes(this.pageIndex,this.pageSize,this.nodeTypeRegion):this.getConsensusInfoByAddress(this.pageIndex,this.pageSize,this.addressInfo.address)}}},b=g,C=(t("64c7"),t("2877")),_=Object(C["a"])(b,n,o,!1,null,null,null);e["default"]=_.exports},cd1c:function(s,e,t){var n=t("e853");s.exports=function(s,e){return new(n(s))(e)}},d2c8:function(s,e,t){var n=t("aae3"),o=t("be13");s.exports=function(s,e,t){if(n(e))throw TypeError("String#"+t+" doesn't accept regex!");return String(o(s))}},e692:function(s,e){s.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(s,e,t){s.exports=t("b9e9")},e853:function(s,e,t){var n=t("d3f4"),o=t("1169"),a=t("2b4c")("species");s.exports=function(s){var e;return o(s)&&(e=s.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),n(e)&&(e=e[a],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-6833053a.bfa42a6c.js.map
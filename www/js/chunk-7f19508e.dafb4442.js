(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f19508e"],{"08e3":function(e,t,a){"use strict";var s=a("7429"),r=a.n(s);r.a},"13f9":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"call"},[a("el-form",{ref:"callForm",staticClass:"call-form",attrs:{model:e.callForm,rules:e.callRules}},[a("el-form-item",{staticClass:"search-model",attrs:{label:"",prop:"region"}},[a("el-select",{attrs:{placeholder:e.$t("call.call1")},on:{change:e.changeModel},model:{value:e.callForm.modelValue,callback:function(t){e.$set(e.callForm,"modelValue",t)},expression:"callForm.modelValue"}},e._l(e.callForm.modelData,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:t}})}),1)],1),e._l(e.callForm.parameterList,function(t,s){return a("el-form-item",{key:s,attrs:{label:t.name,prop:"parameterList."+s+".value",rules:{required:t.required,message:t.name+e.$t("call.call2"),trigger:"blur"}}},[a("el-input",{on:{change:e.changeParameter},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}})],1)}),e.selectionData.view?e._e():a("div",{staticClass:"div-senior"},[a("el-form-item",{staticClass:"senior",attrs:{label:e.$t("call.call3")}},[a("el-switch",{model:{value:e.callForm.senior,callback:function(t){e.$set(e.callForm,"senior",t)},expression:"callForm.senior"}})],1),e.callForm.senior?a("div",{staticClass:"senior-div"},[a("el-form-item",{attrs:{label:"Gas Limit"}},[a("el-input",{attrs:{disabled:""},on:{change:e.changeGas},model:{value:e.callForm.gas,callback:function(t){e.$set(e.callForm,"gas",t)},expression:"callForm.gas"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.gasTips,expression:"gasTips"}],staticClass:"font12 yellow"},[e._v(e._s(e.$t("call.call10")))])],1),a("el-form-item",{attrs:{label:"Price"}},[a("el-input",{attrs:{disabled:""},model:{value:e.callForm.price,callback:function(t){e.$set(e.callForm,"price",t)},expression:"callForm.price"}})],1),e.selectionData.payable?a("el-form-item",{attrs:{label:"Value",prop:"values"}},[a("el-input",{model:{value:e.callForm.values,callback:function(t){e.$set(e.callForm,"values",t)},expression:"callForm.values"}})],1):e._e()],1):e._e()],1),a("el-form-item",{staticClass:"search-submit"},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.submitForm("callForm")}}},[e._v(e._s(e.$t("contract.contract4")))])],1)],2),a("div",{staticClass:"cb"}),e.callResult?a("div",{staticClass:"w630 bg-gray result"},[e._v("\n    "+e._s(e.callResult)+"\n  ")]):e._e(),a("Password",{ref:"password",on:{passwordSubmit:e.passSubmit}})],1)},r=[],l=(a("96cf"),a("3b8d")),n=(a("ac4d"),a("8a81"),a("ac6a"),a("75fc")),c=(a("7f7f"),a("c5f6"),a("0ad0")),i=a.n(c),o=a("b8d7"),u=a.n(o),d=a("e065"),m=a.n(d),h=a("1959"),p=a("d1f0"),f=a("6ace"),g={data:function(){var e=this,t=function(t,a,s){a?a<1?(e.callForm.gas=1,s()):a>1e7?(e.callForm.gas=1e7,s()):s():s(new Error(e.$t("deploy.deploy8")))},a=function(t,a,s){a?a<1?e.callForm.price=1:s():s(new Error(e.$t("deploy.deploy9")))},s=function(t,a,s){a?a<0||0===a?(e.callForm.values=0,s(new Error(e.$t("deploy.deploy22")))):s():s(new Error(e.$t("deploy.deploy22")))};return{addressInfo:{},balanceInfo:{},callForm:{modelData:[],modelValue:"",parameterList:[],senior:!1,gas:0,price:25,values:0},callRules:{gas:[{validator:t,trigger:["blur","change"]}],price:[{validator:a,trigger:"blur"}],values:[{validator:s,trigger:"blur"}]},gasNumber:0,oldGasNumber:0,gasTips:!1,selectionData:{view:!0,payable:!1},contractCallData:{},callResult:"",prefix:"",newArgs:[]}},props:{modelList:Array,contractAddress:String,decimals:Number},components:{Password:p["a"]},created:function(){var e=this;Object(h["g"])(Object(f["f"])()).then(function(t){e.prefix=t}).catch(function(t){console.log(t),e.prefix=""});var t=this.modelList.filter(function(e){return!e.event});this.callForm.modelData=t.filter(function(e){return"<init>"!==e.name}),this.addressInfo=Object(f["e"])(1),setInterval(function(){e.addressInfo=Object(f["e"])(1)},500)},mounted:function(){var e=this;setTimeout(function(){e.getBalanceByAddress(Object(f["f"])(),1,e.addressInfo.address)},600)},watch:{modelList:function(e){var t=e.filter(function(e){return!e.event});this.callForm.modelData=t.filter(function(e){return"<init>"!==e.name})},addressInfo:function(e,t){e.address!==t.address&&t.address&&this.getBalanceByAddress(Object(f["f"])(),1,this.addressInfo.address)},gasNumber:function(e,t){t&&this.oldGasNumber>e?this.gasTips=!0:this.gasTips=!1}},methods:{changeModel:function(e){this.oldGasNumber=0,this.callResult="",this.callForm.parameterList=[];var t=this.callForm.modelData[e];this.selectionData=t,this.callForm.parameterList=Object(n["a"])(t.params),t.payable&&(this.callForm.senior=!0),t.view||(this.callForm.gas=1,this.callForm.values=0);var a=!0,s=!1,r=void 0;try{for(var l,c=this.callForm.parameterList[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var i=l.value;i.value&&(i.value="")}}catch(o){s=!0,r=o}finally{try{a||null==c.return||c.return()}finally{if(s)throw r}}this.newArgs=[],this.callForm.price=u.a.CONTRACT_MINIMUM_PRICE,this.selectionData.view||(0===this.selectionData.params.length?this.imputedContractCallGas(this.addressInfo.address,Number(Object(f["d"])(this.callForm.values,1e8)),this.contractAddress,this.selectionData.name,this.selectionData.desc,this.newArgs):(this.newArgs=Object(f["k"])(this.callForm.parameterList),this.newArgs.allParameter&&this.imputedContractCallGas(this.addressInfo.address,Number(Object(f["d"])(this.callForm.values,1e8)),this.contractAddress,this.selectionData.name,this.selectionData.desc,this.newArgs.args)))},changeParameter:function(){this.selectionData.view||this.selectionData.payable||this.chainMethodCall()},changeGas:function(){this.gasNumber=Number(this.callForm.gas)},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;if(t.selectionData.view){var s=[];0!==t.selectionData.params.length?(s=Object(f["k"])(t.callForm.parameterList,t.decimals),s.allParameter&&t.methodCall(t.contractAddress,t.selectionData.name,t.selectionData.desc,s.args)):t.methodCall(t.contractAddress,t.selectionData.name,t.selectionData.desc,s)}else 0!==t.selectionData.params.length?(t.newArgs=Object(f["k"])(t.callForm.parameterList),t.newArgs.allParameter&&t.imputedContractCallGas(t.addressInfo.address,Number(Object(f["d"])(t.callForm.values,1e8)),t.contractAddress,t.selectionData.name,t.selectionData.desc,t.newArgs.args)):t.imputedContractCallGas(t.addressInfo.address,Number(Object(f["d"])(t.callForm.values,1e8)),t.contractAddress,t.selectionData.name,t.selectionData.desc,t.newArgs),t.getBalanceByAddress(Object(f["f"])(),1,t.addressInfo.address),t.$refs[e].validate(function(e){if(!e)return!1;t.$refs.password.showPassword(!0)})})},methodCall:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,a,s,r){var l=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","invokeView",[t,a,s,r]).then(function(e){e.hasOwnProperty("result")?l.callResult=e.result.result:"err_0014"===e.error.code?l.$message({message:l.$t("call.call8")+e.error.data,type:"error",duration:1e3}):l.$message({message:l.$t("call.call8")+e.error.message,type:"error",duration:1e3})}).catch(function(e){l.$message({message:l.$t("call.call9")+e,type:"error",duration:1e3})});case 2:case"end":return e.stop()}},e,this)}));function t(t,a,s,r){return e.apply(this,arguments)}return t}(),chainMethodCall:function(){var e=[];this.callForm.price=u.a.CONTRACT_MINIMUM_PRICE,0!==this.selectionData.params.length?(e=Object(f["k"])(this.callForm.parameterList,this.decimals),e.allParameter&&this.validateContractCall(this.addressInfo.address,Number(Object(f["d"])(this.callForm.values,1e8)),u.a.CONTRACT_MAX_GASLIMIT,u.a.CONTRACT_MINIMUM_PRICE,this.contractAddress,this.selectionData.name,this.selectionData.desc,e.args)):this.validateContractCall(this.addressInfo.address,Number(Object(f["d"])(this.callForm.values,1e8)),u.a.CONTRACT_MAX_GASLIMIT,u.a.CONTRACT_MINIMUM_PRICE,this.contractAddress,this.selectionData.name,this.selectionData.desc,e)},validateContractCall:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,a,s,r,l,n,c,i){var o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","validateContractCall",[t,a,s,r,l,n,c,i]).then(function(e){e.result.success?o.imputedContractCallGas(t,a,l,n,c,i):o.$message({message:o.$t("call.call6")+e.result.msg,type:"error",duration:2e3})}).catch(function(e){o.$message({message:o.$t("call.call7")+e,type:"error",duration:2e3})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,a,s,r,l,n,c,i){return e.apply(this,arguments)}return t}(),imputedContractCallGas:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,a,s,r,l,n){var c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","imputedContractCallGas",[t,a,s,r,l,n]).then(function(e){if(e.hasOwnProperty("result")){c.gasNumber=e.result.gasLimit,c.oldGasNumber=e.result.gasLimit,c.callForm.gas=e.result.gasLimit;var i=c.getContractMethodArgsTypes(s,r),o=m.a.twoDimensionalArray(n,i);c.contractCallData={chainId:Object(f["f"])(),sender:t,contractAddress:s,value:a,gasLimit:c.callForm.gas,price:c.callForm.price,methodName:r,methodDesc:l,args:o}}else c.$message({message:c.$t("call.call4")+e,type:"error",duration:1e3})}).catch(function(e){c.$message({message:c.$t("call.call5")+e,type:"error",duration:1e3})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,a,s,r,l,n){return e.apply(this,arguments)}return t}(),getContractMethodArgsTypes:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","getContractMethodArgsTypes",[t,a]).then(function(e){return e.hasOwnProperty("result")?{success:!0,data:e.result}:{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),getBalanceByAddress:function(e,t,a){var s=this;Object(h["f"])(e,t,a).then(function(e){e.success?s.balanceInfo=e.data:s.$message({message:s.$t("public.err2")+e,type:"error",duration:1e3})}).catch(function(e){console.log(e),s.$message({message:s.$t("public.err3")+e,type:"error",duration:1e3})})},passSubmit:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var a,s,r,l,n,c,o,u,d,m,p=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=i.a.decrypteOfAES(this.addressInfo.aesPri,t),s=i.a.importByKey(Object(f["f"])(),a,t,this.prefix),s.address!==this.addressInfo.address){e.next=37;break}return r=this.addressInfo.pub,l=Number(Object(f["d"])(this.callForm.gas,this.callForm.price)),n={fromAddress:this.addressInfo.address,assetsChainId:Object(f["f"])(),assetsId:1,amount:l,fee:1e5},l=Number(Object(f["b"])(n.fee,l)),this.callForm.values>0&&(n.toAddress=this.contractAddress,n.value=Number(Object(f["q"])(this.callForm.values)),n.amount=Number(Object(f["b"])(n.value,l))),c="",e.next=11,Object(h["h"])(n,this.balanceInfo,16);case 11:return o=e.sent,e.next=14,i.a.transactionAssemble(o.data.inputs,o.data.outputs,c,16,this.contractCallData);case 14:if(u=e.sent,d="",m=Object(h["d"])(u,1),n.fee===m){e.next=30;break}return n.fee=m,e.next=21,Object(h["h"])(n,this.balanceInfo,16);case 21:return o=e.sent,e.next=24,i.a.transactionAssemble(o.data.inputs,o.data.outputs,c,16,this.contractCallData);case 24:return u=e.sent,e.next=27,i.a.transactionSerialize(a,r,u);case 27:d=e.sent,e.next=33;break;case 30:return e.next=32,i.a.transactionSerialize(a,r,u);case 32:d=e.sent;case 33:return e.next=35,Object(h["j"])(d).then(function(e){e.success?p.callResult=e:"err_0014"===e.data.code?p.$message({message:e.data.message,type:"error",duration:3e3}):p.$message({message:p.$t("error."+e.data.code),type:"error",duration:3e3})}).catch(function(e){p.$message({message:p.$t("public.err1")+e,type:"error",duration:1e3})});case 35:e.next=38;break;case 37:this.$message({message:this.$t("address.address13"),type:"error",duration:1e3});case 38:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},b=g,v=(a("08e3"),a("2877")),w=Object(v["a"])(b,s,r,!1,null,null,null);t["a"]=w.exports},7429:function(e,t,a){}}]);
//# sourceMappingURL=chunk-7f19508e.dafb4442.js.map
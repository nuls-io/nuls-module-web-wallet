(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-345663d4"],{"0a49":function(e,t,r){var s=r("9b43"),n=r("626a"),a=r("4bf8"),o=r("9def"),i=r("cd1c");e.exports=function(e,t){var r=1==e,u=2==e,c=3==e,d=4==e,p=6==e,l=5==e||p,f=t||i;return function(t,i,m){for(var w,h,b=a(t),v=n(b),A=s(i,m,3),g=o(v.length),k=0,y=r?f(t,g):u?f(t,0):void 0;g>k;k++)if((l||k in v)&&(w=v[k],h=A(w,k,b),e))if(r)y[k]=h;else if(h)switch(e){case 3:return!0;case 5:return w;case 6:return k;case 2:y.push(w)}else if(d)return!1;return p?-1:c||d?d:y}}},"188a":function(e,t,r){},1959:function(e,t,r){"use strict";r.d(t,"i",function(){return i}),r.d(t,"d",function(){return u}),r.d(t,"c",function(){return c}),r.d(t,"h",function(){return p}),r.d(t,"f",function(){return f}),r.d(t,"k",function(){return w}),r.d(t,"b",function(){return b}),r.d(t,"j",function(){return A}),r.d(t,"a",function(){return k}),r.d(t,"e",function(){return x}),r.d(t,"g",function(){return O});r("7514"),r("c5f6"),r("6b54"),r("96cf");var s=r("3b8d"),n=r("9f30"),a=r("6ace"),o=r("db49");function i(e){return e===o["e"].chainId}function u(e,t){var r=e.txSerialize().length;return r+=110*t,1e5*Math.ceil(r/1024)}function c(e,t){return d.apply(this,arguments)}function d(){return d=Object(s["a"])(regeneratorRuntime.mark(function e(t,r){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=0,e.next=3,Object(n["a"])("/","getByzantineCount",[t.txSerialize().toString("hex")]).then(function(e){if(e.hasOwnProperty("result")){var n=t.txSerialize().length;n+=110*(r+e.result.value),s=1e6*Math.ceil(n/1024)}else s=-100}).catch(function(e){console.log(e),s=-100});case 3:return e.abrupt("return",s);case 4:case"end":return e.stop()}},e)})),d.apply(this,arguments)}function p(e,t,r){return l.apply(this,arguments)}function l(){return l=Object(s["a"])(regeneratorRuntime.mark(function e(t,r,s){var n,o,i,u,c,d,p,l,m;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=Number(Object(a["b"])(t.amount,t.fee)),o=0,i=r.nonce,u=t.amount,c=0,4===s?c=-1:5===s?c=-1:6===s?(n=t.amount,o=-1,i=t.depositHash.substring(t.depositHash.length-16),u=t.amount-t.fee):9===s&&(n=t.amount,o=-1,i=t.depositHash.substring(t.depositHash.length-16),u=t.amount-t.fee,d=(new Date).valueOf()+2592e5,c=Number(d.toString().substr(0,d.toString().length-3))),p=[{address:t.fromAddress,assetsChainId:t.assetsChainId,assetsId:t.assetsId,amount:n,locked:o,nonce:i}],2!==s||t.assetsChainId===Object(a["f"])()){e.next=16;break}return p[0].amount=t.amount,e.next=11,f(Object(a["f"])(),t.assetsId,t.fromAddress);case 11:if(l=e.sent,!(l.data.balance<1e5)){e.next=15;break}return console.log("余额小于手续费"),e.abrupt("return");case 15:p.push({address:t.fromAddress,assetsChainId:Object(a["f"])(),assetsId:t.assetsId,amount:1e5,locked:o,nonce:l.data.nonce});case 16:if(m=[],15!==s&&17!==s){e.next=19;break}return e.abrupt("return",{success:!0,data:{inputs:p,outputs:m}});case 19:if(16!==s){e.next=22;break}return t.toAddress&&t.value&&(p[0].amount=t.amount,m=[{address:t.toAddress,assetsChainId:t.assetsChainId,assetsId:t.assetsId,amount:t.value,lockTime:c}]),e.abrupt("return",{success:!0,data:{inputs:p,outputs:m}});case 22:return m=[{address:t.toAddress?t.toAddress:t.fromAddress,assetsChainId:t.assetsChainId,assetsId:t.assetsId,amount:u,lockTime:c}],e.abrupt("return",{success:!0,data:{inputs:p,outputs:m}});case 24:case"end":return e.stop()}},e)})),l.apply(this,arguments)}function f(){return m.apply(this,arguments)}function m(){return m=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,r,s,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:2,r=a.length>1&&void 0!==a[1]?a[1]:1,s=a.length>2?a[2]:void 0,e.next=5,Object(n["a"])("/","getAccountBalance",[t,r,s]).then(function(e){return e.hasOwnProperty("result")?{success:!0,data:{balance:e.result.balance,nonce:e.result.nonce}}:{success:!1,data:e}}).catch(function(e){return{success:!1,data:e}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)})),m.apply(this,arguments)}function w(e){return h.apply(this,arguments)}function h(){return h=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])("/","validateTx",[t]).then(function(e){return e.hasOwnProperty("result")?{success:!0,data:e.result}:{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),h.apply(this,arguments)}function b(e){return v.apply(this,arguments)}function v(){return v=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])("/","broadcastTx",[t]).then(function(e){return e.hasOwnProperty("result")?{success:!0,data:e.result}:{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),v.apply(this,arguments)}function A(e){return g.apply(this,arguments)}function g(){return g=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])("/","validateTx",[t]).then(function(e){if(e.hasOwnProperty("result")){var r=e.result.value;return Object(n["a"])("/","broadcastTx",[t]).then(function(e){return e.hasOwnProperty("result")?{success:!0,hash:r}:{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}})}return{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),g.apply(this,arguments)}function k(e){return y.apply(this,arguments)}function y(){return y=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])("/","getConsensusDeposit",[1,300,t]).then(function(e){return e.result}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),y.apply(this,arguments)}function x(e){return $.apply(this,arguments)}function $(){return $=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])("/","getContractConstructor",[t]).then(function(e){return e.hasOwnProperty("result")?{success:!0,data:e.result.constructor}:{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),$.apply(this,arguments)}function F(){return I.apply(this,arguments)}function I(){return I=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=[{chainId:1,addressPrefix:"NULS"},{chainId:2,addressPrefix:"tNULS"}],e.next=3,Object(n["a"])("/","getAllAddressPrefix",[]).then(function(e){e.hasOwnProperty("result")?(sessionStorage.hasOwnProperty("prefixData")&&sessionStorage.removeItem("prefixData"),sessionStorage.setItem("prefixData",JSON.stringify(e.result))):sessionStorage.setItem("prefixData",JSON.stringify(t))}).catch(function(e){console.log(e),sessionStorage.setItem("prefixData",JSON.stringify(t))});case 3:case"end":return e.stop()}},e)})),I.apply(this,arguments)}function O(e){return P.apply(this,arguments)}function P(){return P=Object(s["a"])(regeneratorRuntime.mark(function e(t){var r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:if(r=JSON.parse(sessionStorage.getItem("prefixData")),!r){e.next=8;break}return s=r.find(function(e){return e.chainId===t}),e.abrupt("return",s.addressPrefix);case 8:return e.abrupt("return","");case 9:case"end":return e.stop()}},e)})),P.apply(this,arguments)}},"612c":function(e,t,r){},7514:function(e,t,r){"use strict";var s=r("5ca1"),n=r("0a49")(5),a="find",o=!0;a in[]&&Array(1)[a](function(){o=!1}),s(s.P+s.F*o,"Array",{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(a)},7672:function(e,t,r){"use strict";var s=r("188a"),n=r.n(s);n.a},"7f7f":function(e,t,r){var s=r("86cc").f,n=Function.prototype,a=/^\s*function ([^ (]*)/,o="name";o in n||r("9e1e")&&s(n,o,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},"7ffc":function(e,t,r){"use strict";var s=r("612c"),n=r.n(s);n.a},b483:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"import-address bg-gray"},[r("div",{staticClass:"bg-white"}),r("div",{},[r("el-tabs",{staticClass:"new_import w1200",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:e.$t("importAddress.importAddress2"),name:"keystoreImport",disabled:"0"!==e.resetAddress}},[r("div",{staticClass:"tc upload_keystore"},[e.isfileReader?r("div",[e._v(e._s(e.$t("importAddress.importAddress42")))]):r("el-upload",{staticClass:"upload",attrs:{drag:"",action:"localhost",accept:".keystore","before-upload":e.handleUpload,multiple:!1,limit:1}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text"},[e._v(e._s(e.$t("importAddress.importAddress4"))),r("em",[e._v(e._s(e.$t("importAddress.importAddress41")))])])])],1)]),r("el-tab-pane",{attrs:{label:e.$t("importAddress.importAddress3"),name:"keyImport"}},[r("div",{staticClass:"tab w1200 mt_30"},["0"!==e.resetAddress?r("div",{staticClass:"tc font18 mzt_20"},[e._v("\n            "+e._s(e.$t("public.resetAddress"))+": "+e._s(e.resetAddress)+"\n          ")]):e._e(),r("el-form",{ref:"importForm",staticClass:"import-form w630",attrs:{model:e.importForm,rules:e.importRules,"status-icon":""}},[r("el-form-item",{attrs:{label:e.$t("importAddress.importAddress5"),prop:"keys"}},[r("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.importForm.keys,callback:function(t){e.$set(e.importForm,"keys","string"===typeof t?t.trim():t)},expression:"importForm.keys"}})],1),r("el-form-item",{attrs:{label:e.$t("newAddress.newAddress6"),prop:"pass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.importForm.pass,callback:function(t){e.$set(e.importForm,"pass",t)},expression:"importForm.pass"}})],1),r("el-form-item",{attrs:{label:e.$t("newAddress.newAddress7"),prop:"checkPass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.importForm.checkPass,callback:function(t){e.$set(e.importForm,"checkPass",t)},expression:"importForm.checkPass"}})],1),r("el-form-item",{staticClass:"form-bnt"},[r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.keyImport("importForm")}}},[e._v(e._s(e.$t("importAddress.importAddress8"))+"\n              ")])],1)],1)],1)]),r("el-tab-pane",{attrs:{label:e.$t("importAddress.importAddress0"),name:"newAddress",disabled:"0"!==e.resetAddress}},[r("div",{staticClass:"new_address"},[r("el-form",{ref:"newAddressForm",staticClass:"w630",attrs:{model:e.newAddressForm,"status-icon":"",rules:e.newAddressRules}},[r("el-form-item",{attrs:{label:e.$t("newAddress.newAddress6"),prop:"pass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.newAddressForm.pass,callback:function(t){e.$set(e.newAddressForm,"pass",t)},expression:"newAddressForm.pass"}})],1),r("el-form-item",{attrs:{label:e.$t("newAddress.newAddress7"),prop:"checkPass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.newAddressForm.checkPass,callback:function(t){e.$set(e.newAddressForm,"checkPass",t)},expression:"newAddressForm.checkPass"}})],1),r("el-form-item",{attrs:{label:"",prop:"agreement"}},[r("el-checkbox-group",{model:{value:e.newAddressForm.agreement,callback:function(t){e.$set(e.newAddressForm,"agreement",t)},expression:"newAddressForm.agreement"}},[r("el-checkbox",{attrs:{label:e.$t("newAddress.newAddress8"),name:"agreement"}})],1)],1),r("el-form-item",{staticClass:"form-bnt"},[r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.newAddressSubmitForm("newAddressForm")}}},[e._v("\n                "+e._s(e.$t("importAddress.importAddress0"))+"\n              ")])],1)],1)],1)])],1)],1),r("Password",{ref:"password",on:{passwordSubmit:e.keystoreImportPassSubmit}})],1)},n=[],a=(r("ac6a"),r("96cf"),r("3b8d")),o=(r("7f7f"),r("0ad0")),i=r.n(o),u=r("6ace"),c=r("1959"),d=r("d1f0"),p={data:function(){var e=this,t=function(t,r,s){""===r?s(new Error(e.$t("importAddress.importAddress9"))):r.length<60||r.length>66?s(new Error(e.$t("importAddress.importAddress91"))):s()},r=function(t,r,s){var n=/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{8,20}$/;""===r?s(new Error(e.$t("newAddress.newAddress22"))):n.exec(r)?(""!==e.importForm.checkPass&&e.$refs.importForm.validateField("validateCheckPass"),s()):s(new Error(e.$t("newAddress.newAddress23")))},s=function(t,r,s){""===r?s(new Error(e.$t("newAddress.newAddress24"))):r!==e.importForm.pass?s(new Error(e.$t("newAddress.newAddress25"))):s()},n=function(t,r,s){var n=/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{8,20}$/;""===r?s(new Error(e.$t("newAddress.newAddress22"))):n.exec(r)?(""!==e.newAddressForm.checkPass&&e.$refs.newAddressForm.validateField("validateNewCheckPass"),s()):s(new Error(e.$t("newAddress.newAddress23")))},a=function(t,r,s){""===r?s(new Error(e.$t("newAddress.newAddress24"))):r!==e.newAddressForm.pass?s(new Error(e.$t("newAddress.newAddress25"))):s()};return{activeName:"keystoreImport",prefix:"",isfileReader:"undefined"===typeof FileReader,keystoreInfo:{},resetAddress:this.$route.query.address?this.$route.query.address:"0",importForm:{keys:"",pass:"",checkPass:""},importRules:{keys:[{validator:t,trigger:"blur"}],pass:[{validator:r,trigger:"blur"}],checkPass:[{validator:s,trigger:"blur"}]},importAddressInfo:{},newAddressForm:{pass:"",checkPass:"",agreement:""},newAddressRules:{pass:[{validator:n,trigger:"blur"}],checkPass:[{validator:a,trigger:"blur"}]},newAddressInfo:{}}},components:{Password:d["a"]},created:function(){var e=this;Object(c["g"])(Object(u["f"])()).then(function(t){e.prefix=t}).catch(function(t){console.log(t),e.prefix=""}),this.activeName="0"!==this.resetAddress?"keyImport":"keystoreImport"},methods:{handleClick:function(e){"keystoreImport"===e.name?(this.importAddressInfo={},this.newAddressInfo={},this.$refs["importForm"].resetFields(),this.$refs["newAddressForm"].resetFields()):"keyImport"===e.name?(this.keystoreInfo={},this.newAddressInfo={},this.$refs["newAddressForm"].resetFields()):(this.keystoreInfo={},this.importAddressInfo={},this.$refs["importForm"].resetFields())},handleUpload:function(e){var t=this,r=new FileReader;r.addEventListener("load",function(){t.keystoreInfo=JSON.parse(r.result),t.keystoreInfo.pub=t.keystoreInfo.pubKey,t.keystoreInfo.aesPri=t.keystoreInfo.encryptedPrivateKey,t.$refs.password.showPassword(!0)}),r.readAsText(e,"utf-8")},keystoreImportPassSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=Object(u["n"])(this.keystoreInfo,t),r.success?(s=u["j"],s.address=r.address,s.aesPri=r.aesPri,s.pub=r.pub,Object(u["m"])(s),this.toUrl("address")):this.$message({message:"密码错误，请输入正确的密码!",type:"error",duration:2e3});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),keyImport:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(r){var s,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=10;break}s=i.a.importByKey(Object(u["f"])(),t.importForm.keys,t.importForm.pass,t.prefix),n=u["j"],n.address=s.address,n.aesPri=s.aesPri,n.pub=s.pub,Object(u["m"])(n),t.toUrl("address"),e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},newAddressSubmitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(r){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=10;break}t.newAddressInfo=i.a.newAddress(Object(u["f"])(),t.newAddressForm.pass,t.prefix),s=u["j"],s.address=t.newAddressInfo.address,s.aesPri=t.newAddressInfo.aesPri,s.pub=t.newAddressInfo.pub,Object(u["m"])(s),t.$router.push({name:"backupsAddress",query:{backAddressInfo:s}}),e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},toUrl:function(e){this.$router.push({name:e})}}},l=p,f=(r("7ffc"),r("2877")),m=Object(f["a"])(l,s,n,!1,null,null,null);t["default"]=m.exports},cd1c:function(e,t,r){var s=r("e853");e.exports=function(e,t){return new(s(e))(t)}},d1f0:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"password-dialog",attrs:{title:e.$t("password.password1"),visible:e.passwordVisible,top:"30vh",width:"30rem","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.passwordVisible=t},open:e.passwordShow,close:e.passwordClose}},[r("el-form",{ref:"passwordForm",attrs:{model:e.passwordForm,rules:e.passwordRules},nativeOn:{submit:function(e){e.preventDefault()}}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(e.$t("password.password1")))]),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{ref:"inpus",attrs:{type:"password",maxlength:22},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterSubmit("passwordForm")}},model:{value:e.passwordForm.password,callback:function(t){e.$set(e.passwordForm,"password",t)},expression:"passwordForm.password"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.passwordClose}},[e._v(e._s(e.$t("password.password2")))]),r("el-button",{attrs:{type:"success",id:"passwordInfo"},on:{click:function(t){return e.dialogSubmit("passwordForm")}}},[e._v(e._s(e.$t("password.password3"))+"\n    ")])],1)],1)},n=[],a={props:{},data:function(){var e=this,t=function(t,r,s){""===r?s(new Error(e.$t("password.password1"))):s()};return{passwordVisible:!1,passwordForm:{password:""},passwordRules:{password:[{validator:t,trigger:["blur","change"]}]}}},created:function(){},mounted:function(){},watch:{passwordVisible:function(e){var t=this;e&&setTimeout(function(){t.$refs["inpus"].focus()},200)}},methods:{enterSubmit:function(e){this.passwordForm.password&&this.dialogSubmit(e)},passwordShow:function(){},passwordClose:function(){this.$refs["passwordForm"].resetFields(),this.passwordVisible=!1},showPassword:function(e){this.passwordVisible=e},dialogSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$emit("passwordSubmit",t.passwordForm.password),t.passwordVisible=!1})}}},o=a,i=(r("7672"),r("2877")),u=Object(i["a"])(o,s,n,!1,null,null,null);t["a"]=u.exports},e853:function(e,t,r){var s=r("d3f4"),n=r("1169"),a=r("2b4c")("species");e.exports=function(e){var t;return n(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!n(t.prototype)||(t=void 0),s(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?Array:t}}}]);
//# sourceMappingURL=chunk-345663d4.520319c0.js.map
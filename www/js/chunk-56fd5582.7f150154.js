(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56fd5582"],{"0d40":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.transferLoading,expression:"transferLoading"}],staticClass:"transfer bg-gray"},[s("h3",{staticClass:"title"},[e._v(e._s(e.changeAssets.account)+" "+e._s(e.$t("nav.transfer")))]),s("div",{staticClass:"w1200 bg-white"},[s("el-form",{ref:"transferForm",attrs:{model:e.transferForm,rules:e.transferRules,"status-icon":""}},[s("el-form-item",{attrs:{label:e.$t("transfer.transfer0")}},[s("el-input",{attrs:{disabled:""},model:{value:e.transferForm.fromAddress,callback:function(t){e.$set(e.transferForm,"fromAddress","string"===typeof t?t.trim():t)},expression:"transferForm.fromAddress"}})],1),s("el-form-item",{attrs:{label:e.$t("transfer.transfer1"),prop:"toAddress"}},[s("el-input",{on:{change:e.changeParameter},model:{value:e.transferForm.toAddress,callback:function(t){e.$set(e.transferForm,"toAddress","string"===typeof t?t.trim():t)},expression:"transferForm.toAddress"}},[s("i",{staticClass:"iconfont iconlianxiren click font18",attrs:{slot:"suffix"},on:{click:e.showBook},slot:"suffix"})])],1),s("el-form-item",{attrs:{label:e.$t("transfer.transfer2")}},[s("el-select",{on:{change:e.changeType},model:{value:e.transferForm.type,callback:function(t){e.$set(e.transferForm,"type",t)},expression:"transferForm.type"}},e._l(e.assetsList,function(t){return s("el-option",{key:1===t.type?t.chainId:t.contractAddress,attrs:{label:t.symbol,disabled:e.isCross&&2===t.type,value:t}})}),1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isCross,expression:"isCross"}],staticClass:"cross yellow font12"},[e._v(e._s(e.$t("transfer.transfer15")))]),s("el-form-item",{attrs:{label:e.$t("transfer.transfer3"),prop:"amount"}},[s("span",{staticClass:"balance font12 fr"},[e._v(e._s(e.$t("public.usableBalance"))+": "+e._s(e.changeAssets.balance))]),s("el-input",{on:{change:e.changeParameter},model:{value:e.transferForm.amount,callback:function(t){e.$set(e.transferForm,"amount",t)},expression:"transferForm.amount"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:1!==e.changeAssets.type,expression:"changeAssets.type !== 1"}],staticClass:"div-senior"},[s("el-form-item",{staticClass:"senior",attrs:{label:e.$t("call.call3")}},[s("el-switch",{model:{value:e.transferForm.senior,callback:function(t){e.$set(e.transferForm,"senior",t)},expression:"transferForm.senior"}})],1),e.transferForm.senior?s("div",{staticClass:"senior-div"},[s("el-form-item",{attrs:{label:"Gas Limit",prop:"gas"}},[s("el-input",{attrs:{disabled:""},on:{change:e.changeGas},model:{value:e.transferForm.gas,callback:function(t){e.$set(e.transferForm,"gas",t)},expression:"transferForm.gas"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.gasTips,expression:"gasTips"}],staticClass:"font12 yellow"},[e._v(e._s(e.$t("call.call10")))])],1),s("el-form-item",{attrs:{label:"Price",prop:"price"}},[s("el-input",{attrs:{disabled:""},model:{value:e.transferForm.price,callback:function(t){e.$set(e.transferForm,"price",t)},expression:"transferForm.price"}})],1)],1):e._e()],1),s("div",{staticClass:"cb"}),s("el-form-item",{attrs:{label:e.$t("transfer.transfer4")}},[s("el-input",{attrs:{type:"textarea",maxlength:"200","show-word-limit":""},model:{value:e.transferForm.remarks,callback:function(t){e.$set(e.transferForm,"remarks",t)},expression:"transferForm.remarks"}})],1),s("div",{staticClass:"font14"},[s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.$t("transfer.transfer5")))]),s("i",{staticClass:"el-icon-warning"})]),e._v("\n        "+e._s(e.$t("public.fee"))+": "+e._s(e.fee)+"\n        "),s("span",{staticClass:"fCN"},[e._v(e._s(e.feeSymbol))])],1),s("el-form-item",{staticClass:"form-next"},[s("el-button",{attrs:{type:"success",disabled:e.isNext},on:{click:function(t){return e.submitForm("transferForm")}}},[e._v(e._s(e.$t("public.next"))+"\n        ")])],1)],1)],1),s("Password",{ref:"password",on:{passwordSubmit:e.passSubmit}}),s("el-dialog",{staticClass:"confirm-dialog",attrs:{title:e.$t("transfer.transfer6"),width:"46rem",visible:e.transferVisible,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.transferVisible=t}}},[s("div",{staticClass:"bg-white"},[s("div",{staticClass:"div-data"},[s("p",[e._v(e._s(e.$t("transfer.transfer0"))+" ")]),s("label",[e._v(e._s(e.transferForm.fromAddress))])]),s("div",{staticClass:"div-data"},[s("p",[e._v(e._s(e.$t("transfer.transfer1"))+" ")]),e.aliasToAddress?s("label",[e._v(e._s(e.aliasToAddress)+"("+e._s(e.transferForm.toAddress)+")")]):s("label",[e._v(e._s(e.transferForm.toAddress))])]),s("div",{staticClass:"div-data"},[s("p",[e._v(e._s(e.$t("public.fee"))+":  ")]),s("label",[e._v(e._s(e.fee)+" "),s("span",{staticClass:"fCN"},[e._v(e._s(e.feeSymbol))])])]),s("div",{staticClass:"div-data"},[s("p",[e._v(e._s(e.$t("tab.tab6"))+": ")]),s("label",{staticClass:"yellow"},[e._v(e._s(e.transferForm.amount)+" "),s("span",{staticClass:"fCN"},[e._v(e._s(e.changeAssets.account))])])]),s("div",{staticClass:"div-data"},[s("p",[e._v(e._s(e.$t("transfer.transfer4"))+" ")]),s("label",[e._v(e._s(e.transferForm.remarks))])])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.transferVisible=!1}}},[e._v(e._s(e.$t("transfer.transfer7")))]),s("el-button",{attrs:{type:"success"},on:{click:e.confirmTraanser}},[e._v(e._s(e.$t("transfer.transfer8")))])],1)]),s("el-dialog",{staticClass:"book-dialog",attrs:{title:e.$t("public.bookList"),width:"50rem",visible:e.bookDialog,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.bookDialog=t}}},[s("el-table",{attrs:{data:e.bookData}},[s("el-table-column",{attrs:{property:"name",label:e.$t("transfer.transfer4"),width:"100",align:"center"}}),s("el-table-column",{attrs:{property:"address",label:e.$t("tab.tab11"),"min-width":"300",align:"center"}}),s("el-table-column",{attrs:{property:"alias",label:e.$t("address.address3"),width:"100",align:"center"}}),s("el-table-column",{attrs:{label:"",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-link",{staticClass:"click td",attrs:{underline:!1},on:{click:function(s){return e.handleClick(t.row)}}},[e._v(e._s(e.$t("public.choice"))+"\n          ")])]}}])})],1)],1)],1)},a=[],n=s("9acd"),i=n["a"],o=(s("3fbe"),s("2877")),c=Object(o["a"])(i,r,a,!1,null,null,null);t["default"]=c.exports},"243f":function(e,t,s){},"3b2b":function(e,t,s){var r=s("7726"),a=s("5dbc"),n=s("86cc").f,i=s("9093").f,o=s("aae3"),c=s("0bfb"),u=r.RegExp,d=u,l=u.prototype,f=/a/g,h=/a/g,m=new u(f)!==f;if(s("9e1e")&&(!m||s("79e5")(function(){return h[s("2b4c")("match")]=!1,u(f)!=f||u(h)==h||"/a/i"!=u(f,"i")}))){u=function(e,t){var s=this instanceof u,r=o(e),n=void 0===t;return!s&&r&&e.constructor===u&&n?e:a(m?new d(r&&!n?e.source:e,t):d((r=e instanceof u)?e.source:e,r&&n?c.call(e):t),s?this:l,u)};for(var b=function(e){e in u||n(u,e,{configurable:!0,get:function(){return d[e]},set:function(t){d[e]=t}})},p=i(d),g=0;p.length>g;)b(p[g++]);l.constructor=u,u.prototype=l,s("2aba")(r,"RegExp",u)}s("7a56")("RegExp")},"3fbe":function(e,t,s){"use strict";var r=s("243f"),a=s.n(r);a.a},"7a56":function(e,t,s){"use strict";var r=s("7726"),a=s("86cc"),n=s("9e1e"),i=s("2b4c")("species");e.exports=function(e){var t=r[e];n&&t&&!t[i]&&a.f(t,i,{configurable:!0,get:function(){return this}})}},"9acd":function(e,t,s){"use strict";(function(e){s("6b54"),s("7f7f"),s("ac4d"),s("8a81"),s("ac6a"),s("96cf");var r=s("3b8d"),a=(s("c5f6"),s("3b2b"),s("0ad0")),n=s.n(a),i=s("b8d7"),o=s.n(i),c=s("e065"),u=s.n(c),d=s("1959"),l=s("db49"),f=s("6ace"),h=s("d1f0");t["a"]={data:function(){var e=this,t=function(t,s,r){var a=/^(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{20,50}$/;""===s?r(new Error(e.$t("transfer.transfer9"))):a.exec(s)?(e.aliasToAddress="",r()):(e.getAccountByAlias(s),setTimeout(function(){s.length<20&&e.aliasToAddress?r():(s.length>20?r():r(new Error(e.$t("transfer.transfer10"))),e.aliasToAddress="")},500))},s=function(t,s,r){var a=new RegExp("^([1-9][\\d]{0,20}|0)(\\.[\\d]{1,"+e.changeAssets.decimals+"})?$");""===s?r(new Error(e.$t("transfer.transfer11"))):a.exec(s)?Number(s)<.001?r(new Error(e.$t("transfer.transfer13"))):Number(s)>Number(Object(f["a"])(e.changeAssets.balance,.001))?r(new Error(e.$t("transfer.transfer131")+Number(Object(f["a"])(e.changeAssets.balance,.001)))):setTimeout(function(){Number(s)>Number(e.changeAssets.balance)?r(new Error(e.$t("transfer.transfer14"))):Number(s)===Number(e.changeAssets.balance)?e.transferForm.amount=Number(Object(f["a"])(s,e.fee)):r()},200):r(new Error(e.$t("transfer.transfer12")+": "+e.changeAssets.decimals))},r=function(t,s,r){s?s<1||s>1e7?r(new Error(e.$t("deploy.deploy81"))):r():r(new Error(e.$t("deploy.deploy8")))},a=function(t,s,r){s?s<1?r(new Error(e.$t("deploy.deploy91"))):r():r(new Error(e.$t("deploy.deploy9")))};return{addressInfo:"",balanceInfo:"",assetsList:[],changeAssets:{},gasNumber:0,oldGasNumber:0,gasTips:!1,transferForm:{fromAddress:"",toAddress:"",type:this.$route.query.accountType?this.$route.query.accountType:"NULS",amount:"",senior:!1,gas:this.gasNumber,price:o.a.CONTRACT_MINIMUM_PRICE,remarks:""},transferRules:{toAddress:[{validator:t,trigger:"change"}],amount:[{validator:s,trigger:["blur","change"]}],gas:[{validator:r,trigger:["blur","change"]}],price:[{validator:a,trigger:"blur"}]},fee:.001,feeSymbol:"NULS",contractInfo:{},transferVisible:!1,isCross:!1,isNext:!1,transferLoading:!1,bookDialog:!1,bookData:[],aliasToAddress:"",prefix:""}},created:function(){var e=this;Object(d["g"])(Object(f["f"])()).then(function(t){e.prefix=t}).catch(function(t){console.log(t),e.prefix=""}),this.addressInfo=Object(f["e"])(1),setInterval(function(){e.addressInfo=Object(f["e"])(1)},500),this.transferForm.fromAddress=this.addressInfo.address,setTimeout(function(){e.getCapitalListByAddress(e.transferForm.fromAddress)},600)},mounted:function(){},watch:{addressInfo:function(e,t){e.address!==t.address&&t.address&&(this.transferForm.fromAddress=this.addressInfo.address,this.getCapitalListByAddress(this.transferForm.fromAddress),this.changeParameter(),this.isNext=!1,this.transferForm.toAddress&&this.$refs.transferForm.validateField("toAddress"),this.transferForm.amount&&this.$refs.transferForm.validateField("amount"))},gasNumber:function(e,t){t&&this.oldGasNumber>e?this.gasTips=!0:this.gasTips=!1}},components:{Password:h["a"]},methods:{getAccountByAlias:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","getAccountByAlias",[t]).then(function(e){e.hasOwnProperty("result")?s.aliasToAddress=e.result.address:s.aliasToAddress=""}).catch(function(e){console.log(e),s.aliasToAddress=""});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getSymbol:function(){var e=!0,t=!1,s=void 0;try{for(var r,a=this.assetsList[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var n=r.value;n.chainId===Object(f["f"])()&&1===n.type&&(this.feeSymbol=n.symbol)}}catch(i){t=!0,s=i}finally{try{e||null==a.return||a.return()}finally{if(t)throw s}}},getCapitalListByAddress:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var s,r,a,n,i,o,c,u,d,h,m,b,p=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.assetsList=[],s=[],r=l["e"].chainId,e.next=5,this.$post("/","getAccountLedgerList",[t]).then(function(e){if(e.hasOwnProperty("result")){var t=!0,a=!1,n=void 0;try{for(var i,o=e.result[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var c=i.value;s.push({type:1,symbol:c.symbol,chainId:c.chainId,assetId:c.assetId,balance:Object(f["p"])(c.balance),decimals:8}),r=c.chainId}}catch(u){a=!0,n=u}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}}}).catch(function(e){console.log("getAccountLedgerList:"+e),p.assetsListLoading=!1});case 5:return a=[],e.next=8,this.$post("/","getAccountTokens",[1,100,t]).then(function(e){if(e.hasOwnProperty("result")){var t=!0,s=!1,n=void 0;try{for(var i,o=e.result.list[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var c=i.value;a.push({type:2,symbol:c.tokenSymbol,chainId:r,assetId:1,balance:Object(f["p"])(c.balance,c.decimals),contractAddress:c.contractAddress,decimals:c.decimals})}}catch(u){s=!0,n=u}finally{try{t||null==o.return||o.return()}finally{if(s)throw n}}}}).catch(function(e){console.log("getAccountTokens:"+e)});case 8:return n=[],e.next=11,this.$post("/","getAccountCrossLedgerList",[t]).then(function(e){if(e.hasOwnProperty("result")){var t=!0,s=!1,r=void 0;try{for(var a,i=e.result[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;n.push({type:1,symbol:o.symbol,chainId:o.chainId,assetId:o.assetId,balance:Object(f["p"])(o.balance,o.decimals),decimals:o.decimals})}}catch(c){s=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(s)throw r}}}}).catch(function(e){console.log("getAccountCrossLedgerList:"+e)});case 11:for(this.assetsList=[].concat(s,a,n),i=!1,o=!0,c=!1,u=void 0,e.prev=16,d=this.assetsList[Symbol.iterator]();!(o=(h=d.next()).done);o=!0)m=h.value,"NULS"===m.symbol&&(i=!0);e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](16),c=!0,u=e.t0;case 24:e.prev=24,e.prev=25,o||null==d.return||d.return();case 27:if(e.prev=27,!c){e.next=30;break}throw u;case 30:return e.finish(27);case 31:return e.finish(24);case 32:i||(b={type:1,symbol:"NULS",chainId:l["e"].chainId,assetId:l["e"].assetsId,balance:0},this.assetsList.unshift(b)),this.changeNuls(0),this.getSymbol();case 35:case"end":return e.stop()}},e,this,[[16,20,24,32],[25,,27,31]])}));function t(t){return e.apply(this,arguments)}return t}(),sleep:function(e){return new Promise(function(t){setTimeout(function(){t()},e)})},changeParameter:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,s,r,a,i,c,u,d,l,h,m,b,p,g,v,y,x,A,I,k,w,C,$,F,O=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.transferForm.toAddress){e.next=87;break}return this.contractInfo={},t=n.a.verifyAddress(this.transferForm.fromAddress),s={},e.next=6,this.sleep(500);case 6:if(s=this.aliasToAddress?n.a.verifyAddress(this.aliasToAddress):n.a.verifyAddress(this.transferForm.toAddress),2!==s.type){e.next=39;break}return this.changeNuls(),e.next=11,this.contractInfoByContractAddress(this.transferForm.toAddress);case 11:if(r=e.sent,0===r.length){e.next=36;break}for(a=!1,i=!0,c=!1,u=void 0,e.prev=17,d=r[Symbol.iterator]();!(i=(l=d.next()).done);i=!0)h=l.value,"_payable"===h.name&&(a=!0);e.next=25;break;case 21:e.prev=21,e.t0=e["catch"](17),c=!0,u=e.t0;case 25:e.prev=25,e.prev=26,i||null==d.return||d.return();case 28:if(e.prev=28,!c){e.next=31;break}throw u;case 31:return e.finish(28);case 32:return e.finish(25);case 33:a?this.transferForm.amount&&(this.transferForm.gas=o.a.CONTRACT_MAX_GASLIMIT,this.$refs["transferForm"].validate(function(e){if(!e)return!1;var t=o.a.CONTRACT_MAX_GASLIMIT,s=O.transferForm.price,r=O.contractInfo.contractAddress,a="_payable",n="",i=[];O.validateContractCall(O.addressInfo.address,Number(Object(f["d"])(O.transferForm.amount,1e8)),t,s,r,a,n,i)})):this.$message({message:this.$t("transfer.transfer18"),type:"error",duration:2e3}),e.next=37;break;case 36:this.$message({message:this.$t("transfer.transfer19"),type:"error",duration:2e3});case 37:e.next=87;break;case 39:if(t.chainId!==s.chainId){e.next=64;break}for(this.isCross=!1,this.fee=.001,this.getSymbol(),m=!0,b=!1,p=void 0,e.prev=46,g=this.assetsList[Symbol.iterator]();!(m=(v=g.next()).done);m=!0)y=v.value,y.chainId===Object(f["f"])()&&1===y.type&&(Number(y.balance)<.001?(this.isNext=!0,this.$message({message:this.$t("transfer.transfer17"),type:"error",duration:2e3})):this.isNext=!1);e.next=54;break;case 50:e.prev=50,e.t1=e["catch"](46),b=!0,p=e.t1;case 54:e.prev=54,e.prev=55,m||null==g.return||g.return();case 57:if(e.prev=57,!b){e.next=60;break}throw p;case 60:return e.finish(57);case 61:return e.finish(54);case 62:e.next=87;break;case 64:for(this.isCross=!0,this.fee=.01,this.feeSymbol="NULS",2===this.changeAssets.type&&this.changeNuls(),x=!0,A=!1,I=void 0,e.prev=71,k=this.assetsList[Symbol.iterator]();!(x=(w=k.next()).done);x=!0)C=w.value,$="NULS"===C.symbol&&Number(C.balance)<.01,F=Object(f["f"])()===C.chainId&&Number(C.balance)<.01,$?(this.isNext=!0,this.$message({message:this.$t("transfer.transfer16"),type:"error",duration:2e3})):F&&(this.isNext=!0,this.$message({message:this.$t("transfer.transfer17"),type:"error",duration:2e3}));e.next=79;break;case 75:e.prev=75,e.t2=e["catch"](71),A=!0,I=e.t2;case 79:e.prev=79,e.prev=80,x||null==k.return||k.return();case 82:if(e.prev=82,!A){e.next=85;break}throw I;case 85:return e.finish(82);case 86:return e.finish(79);case 87:1!==this.changeAssets.type?(this.transferForm.gas=o.a.CONTRACT_MAX_GASLIMIT,this.$refs["transferForm"].validate(function(e){if(!e)return!1;O.contractInfoByContractAddress(O.changeAssets.contractAddress,1);var t=o.a.CONTRACT_MAX_GASLIMIT,s=O.transferForm.price,r=O.changeAssets.contractAddress,a="transfer",n="",i=[O.transferForm.toAddress,Number(Object(f["d"])(O.transferForm.amount,Number(Object(f["c"])(O.changeAssets.decimals))))];O.validateContractCall(O.addressInfo.address,0,t,s,r,a,n,i)})):this.$refs["transferForm"].validate();case 88:case"end":return e.stop()}},e,this,[[17,21,25,33],[26,,28,32],[46,50,54,62],[55,,57,61],[71,75,79,87],[80,,82,86]])}));function t(){return e.apply(this,arguments)}return t}(),contractInfoByContractAddress:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var s,r=this,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=a.length>1&&void 0!==a[1]?a[1]:0,e.next=3,this.$post("/","getContract",[t]).then(function(e){if(!e.hasOwnProperty("result"))return[];if(1===s){if(3!==e.result.status)return r.contractInfo=e.result,e.result.methods;r.isNext=!0,r.$message({message:e.result.tokenName+r.$t("transfer.transfer21"),type:"error",duration:1e3})}else if(3!==e.result.status)return r.contractInfo=e.result,e.result.methods}).catch(function(e){return console.log(e),[]});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changeType:function(e){this.changeParameter(),1===e.type?(this.transferForm.gas=5e3,this.transferForm.price=25):(this.transferForm.gas=0,this.transferForm.price=o.a.CONTRACT_MINIMUM_PRICE),this.changeAssets=e,this.transferForm.type=e.symbol},changeNuls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="NULS";0===e&&this.$route.query.accountType&&(t=this.$route.query.accountType);var s=!0,r=!1,a=void 0;try{for(var n,i=this.assetsList[Symbol.iterator]();!(s=(n=i.next()).done);s=!0){var o=n.value;o.symbol===t&&(this.changeAssets=o,this.transferForm.type=o.symbol)}}catch(c){r=!0,a=c}finally{try{s||null==i.return||i.return()}finally{if(r)throw a}}},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.transferVisible=!0})},confirmTraanser:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.getNulsBalance(this.changeAssets.chainId,1,this.transferForm.fromAddress),this.$refs.password.showPassword(!0);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getNulsBalance:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,s,r){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["f"])(t,s,r).then(function(e){e.success?a.balanceInfo=e.data:a.$message({message:a.$t("public.err")+e,type:"error",duration:1e3})}).catch(function(e){a.$message({message:a.$t("public.err0")+e,type:"error",duration:1e3})});case 2:case"end":return e.stop()}},e)}));function t(t,s,r){return e.apply(this,arguments)}return t}(),passSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var s,r,a,i,o,c,u,h,m=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=n.a.decrypteOfAES(this.addressInfo.aesPri,t),r=n.a.importByKey(this.addressInfo.chainId,s,t,this.prefix),a="",r.address!==this.addressInfo.address){e.next=98;break}if(this.transferVisible=!1,this.transferLoading=!0,i={fromAddress:this.transferForm.fromAddress,assetsChainId:this.changeAssets.chainId,assetsId:this.changeAssets.assetId,fee:1e5},o={},c=[],!this.contractInfo.success){e.next=21;break}return this.contractCallData.chainId=l["e"].chainId,i["amount"]=Number(Object(f["b"])(i.fee,Number(Object(f["d"])(this.transferForm.gas,this.transferForm.price)))),i.value=Number(Object(f["q"])(this.transferForm.amount,this.changeAssets.decimals)),e.next=15,Object(d["h"])(i,this.balanceInfo,16);case 15:return o=e.sent,e.next=18,n.a.transactionAssemble(o.data.inputs,o.data.outputs,this.transferForm.remarks,16,this.contractCallData);case 18:c=e.sent,e.next=49;break;case 21:if(1!==this.changeAssets.type||this.isCross){e.next=32;break}return i["toAddress"]=this.aliasToAddress?this.aliasToAddress:this.transferForm.toAddress,i["amount"]=Number(Object(f["d"])(this.transferForm.amount,1e8).toString()),e.next=26,Object(d["h"])(i,this.balanceInfo,2);case 26:return o=e.sent,e.next=29,n.a.transactionAssemble(o.data.inputs,o.data.outputs,this.transferForm.remarks,2);case 29:c=e.sent,e.next=49;break;case 32:if(1!==this.changeAssets.type||!this.isCross){e.next=42;break}return i["toAddress"]=this.transferForm.toAddress,i["amount"]=Number(Object(f["d"])(this.transferForm.amount,1e8).toString()),i["remark"]=this.transferForm.remarks,i.fee=1e6,e.next=39,this.crossTxhexs(s,this.addressInfo.pub,this.addressInfo.chainId,i);case 39:a=e.sent,e.next=49;break;case 42:return i["amount"]=Number(Object(f["b"])(0,Number(Object(f["d"])(this.transferForm.gas,this.transferForm.price)))),e.next=45,Object(d["h"])(i,this.balanceInfo,16);case 45:return o=e.sent,e.next=48,n.a.transactionAssemble(o.data.inputs,o.data.outputs,this.transferForm.remarks,16,this.contractCallData);case 48:c=e.sent;case 49:if(u="",1!==this.changeAssets.type||!this.isCross){e.next=54;break}u=a,e.next=89;break;case 54:if(h=Object(d["d"])(c,1),i.fee===h){e.next=86;break}if(i.fee=h,!this.contractInfo.success){e.next=66;break}return e.next=60,Object(d["h"])(i,this.balanceInfo,16);case 60:return o=e.sent,e.next=63,n.a.transactionAssemble(o.data.inputs,o.data.outputs,this.transferForm.remarks,16,this.contractCallData);case 63:c=e.sent,e.next=81;break;case 66:if(1!==this.changeAssets.type){e.next=75;break}return e.next=69,Object(d["h"])(i,this.balanceInfo,2);case 69:return o=e.sent,e.next=72,n.a.transactionAssemble(o.data.inputs,o.data.outputs,this.transferForm.remarks,2);case 72:c=e.sent,e.next=81;break;case 75:return e.next=77,Object(d["h"])(i,this.balanceInfo,16);case 77:return o=e.sent,e.next=80,n.a.transactionAssemble(o.data.inputs,o.data.outputs,this.transferForm.remarks,16,this.contractCallData);case 80:c=e.sent;case 81:return e.next=83,n.a.transactionSerialize(n.a.decrypteOfAES(this.addressInfo.aesPri,t),this.addressInfo.pub,c);case 83:u=e.sent,e.next=89;break;case 86:return e.next=88,n.a.transactionSerialize(n.a.decrypteOfAES(this.addressInfo.aesPri,t),this.addressInfo.pub,c);case 88:u=e.sent;case 89:if(!this.isCross){e.next=94;break}return e.next=92,this.$post("/","sendCrossTx",[u]).then(function(e){m.transferLoading=!1,e.hasOwnProperty("result")?m.toUrl("txList"):m.$message({message:m.$t("public.err4")+"code:"+e.error.message+" "+e.error.message,type:"error",duration:3e3})}).catch(function(e){console.log(e),m.transferLoading=!1,m.$message({message:m.$t("public.err4")+e,type:"error",duration:5e3})});case 92:e.next=96;break;case 94:return e.next=96,Object(d["j"])(u).then(function(e){m.transferLoading=!1,e.success?m.toUrl("txList"):m.$message({message:m.$t("error."+e.data.code),type:"error",duration:3e3})}).catch(function(e){m.transferLoading=!1,m.$message({message:m.$t("public.err1")+e,type:"error",duration:1e3})});case 96:e.next=99;break;case 98:this.$message({message:this.$t("address.address13"),type:"error",duration:1e3});case 99:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),crossTxhexs:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(r,a,i,o){var c,u,f,h,m,b,p,g,v,y,x,A,I,k,w,C,$,F=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["f"])(o.assetsChainId,o.assetsId,o.fromAddress);case 2:return c=t.sent,u=[],f=[{address:o.toAddress?o.toAddress:o.fromAddress,assetsChainId:o.assetsChainId,assetsId:o.assetsId,amount:o.amount,lockTime:0}],t.next=7,Object(d["f"])(l["e"].chainId,l["e"].assetsId,o.fromAddress);case 7:if(h=t.sent,Object(d["i"])(i)){t.next=12;break}if(!(h.data.balance<o.fee)){t.next=12;break}return this.$message({message:this.$t("newConsensus.newConsensus7"),type:"error",duration:3e3}),t.abrupt("return");case 12:if(i!==o.assetsChainId||1!==o.assetsId){t.next=21;break}if(b=o.amount+o.fee,!(c.data.balance<o.amount+o.fee)){t.next=17;break}return this.$message({message:this.$t("newConsensus.newConsensus7"),type:"error",duration:1e3}),t.abrupt("return");case 17:u.push({address:o.fromAddress,assetsChainId:o.assetsChainId,assetsId:o.assetsId,amount:b,locked:0,nonce:c.data.nonce}),Object(d["i"])(i)||u.push({address:o.fromAddress,assetsChainId:l["e"].chainId,assetsId:l["e"].assetsId,amount:o.fee,locked:0,nonce:h.data.nonce}),t.next=38;break;case 21:return t.next=23,Object(d["f"])(i,1,o.fromAddress);case 23:if(m=t.sent,!(m.data.balance<o.fee)){t.next=27;break}return this.$message({message:this.$t("transfer.transfer20"),type:"error",duration:1e3}),t.abrupt("return");case 27:if(o.assetsChainId!==l["e"].chainId||1!==o.assetsId){t.next=35;break}if(p=o.amount+o.fee,!(h.data.balance<p)){t.next=32;break}return this.$message({message:this.$t("newConsensus.newConsensus7"),type:"error",duration:1e3}),t.abrupt("return");case 32:u.push({address:o.fromAddress,assetsChainId:o.assetsChainId,assetsId:o.assetsId,amount:p,locked:0,nonce:h.data.nonce}),t.next=37;break;case 35:u.push({address:o.fromAddress,assetsChainId:o.assetsChainId,assetsId:o.assetsId,amount:o.amount,locked:0,nonce:c.data.nonce}),u.push({address:o.fromAddress,assetsChainId:l["e"].chainId,assetsId:l["e"].assetsId,amount:o.fee,locked:0,nonce:h.data.nonce});case 37:Object(d["i"])(i)||u.push({address:o.fromAddress,assetsChainId:i,assetsId:1,amount:o.fee,locked:0,nonce:m.data.nonce});case 38:return t.next=40,n.a.transactionAssemble(u,f,o.remark,10);case 40:if(g=t.sent,v="",y="",x=s("4077"),A=s("a648"),I=new A,k=new x.CrossChainTransaction,w=e.from(a,"hex"),C=0,!Object(d["i"])(i)){t.next=54;break}return t.next=52,Object(d["c"])(g,1).then(function(e){C=e}).catch(function(e){F.$message({message:F.$t("newConsensus.newConsensus7"),type:"error",duration:2e3}),console.log(e)});case 52:t.next=61;break;case 54:return t.next=56,Object(d["c"])(g,2).then(function(e){C=e}).catch(function(e){F.$message({message:F.$t("newConsensus.newConsensus7"),type:"error",duration:1e3}),console.log(e)});case 56:k.time=g.time,k.remark=g.remark,$=[],o.assetsChainId===l["e"].chainId&&1===o.assetsId?$.push({address:o.fromAddress,assetsChainId:o.assetsChainId,assetsId:o.assetsId,amount:o.amount+C,locked:0,nonce:h.data.nonce}):$=[{address:o.fromAddress,assetsChainId:o.assetsChainId,assetsId:o.assetsId,amount:o.amount,locked:0,nonce:c.data.nonce},{address:o.fromAddress,assetsChainId:l["e"].chainId,assetsId:l["e"].assetsId,amount:C,locked:0,nonce:h.data.nonce}],k.setCoinData($,f);case 61:if(o.fee===C){t.next=89;break}if(i!==o.assetsChainId||1!==o.assetsId){t.next=70;break}if(!(c.data.balance<o.amount+C)){t.next=66;break}return this.$message({message:this.$t("newConsensus.newConsensus7"),type:"error",duration:1e3}),t.abrupt("return");case 66:u[0].amount=o.amount+C,Object(d["i"])(i)||(u[1].amount=C),t.next=83;break;case 70:if(!(m.data.balance<o.fee)){t.next=73;break}return this.$message({message:this.$t("transfer.transfer20"),type:"error",duration:1e3}),t.abrupt("return");case 73:if(o.assetsChainId!==l["e"].chainId||1!==o.assetsId){t.next=81;break}if(!(h.data.balance<o.amount+C)){t.next=77;break}return this.$message({message:this.$t("newConsensus.newConsensus7"),type:"error",duration:1e3}),t.abrupt("return");case 77:u[0].amount=o.amount+C,u[1].amount=C,t.next=83;break;case 81:u[1].amount=C,u[2].amount=C;case 83:return t.next=85,n.a.transactionAssemble(u,f,o.remark,10);case 85:g=t.sent,v=n.a.transactionSignature(r,g),t.next=90;break;case 89:v=n.a.transactionSignature(r,g);case 90:return I.writeBytesWithLength(w),I.writeBytesWithLength(v),Object(d["i"])(i)||(y=n.a.transactionSignature(r,k),I.writeBytesWithLength(w),I.writeBytesWithLength(y)),g.signatures=I.getBufWriter().toBuffer(),t.abrupt("return",g.txSerialize().toString("hex"));case 95:case"end":return t.stop()}},t,this)}));function a(e,s,r,a){return t.apply(this,arguments)}return a}(),validateContractCall:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,s,r,a,n,i,o,c){var u=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","validateContractCall",[t,s,r,a,n,i,o,c]).then(function(e){e.hasOwnProperty("result")?u.imputedContractCallGas(t,s,n,i,o,c):u.$message({message:u.$t("call.call6"),type:"error",duration:1e3})}).catch(function(e){u.$message({message:u.$t("call.call7")+e,type:"error",duration:1e3})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,s,r,a,n,i,o,c){return e.apply(this,arguments)}return t}(),imputedContractCallGas:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,s,r,a,n,i){var o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","imputedContractCallGas",[t,s,r,a,n,i]).then(function(e){if(e.hasOwnProperty("result")){o.gasNumber=e.result.gasLimit,o.oldGasNumber=e.result.gasLimit,o.transferForm.gas=e.result.gasLimit;var c=o.getContractMethodArgsTypes(r,a),d=u.a.twoDimensionalArray(i,c);o.contractCallData={chainId:l["e"].chainId,sender:t,contractAddress:r,value:s,gasLimit:o.transferForm.gas,price:o.transferForm.price,methodName:a,methodDesc:n,args:d}}else o.$message({message:o.$t("call.call4"),type:"error",duration:1e3})}).catch(function(e){o.$message({message:o.$t("call.call5")+e,type:"error",duration:1e3})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,s,r,a,n,i){return e.apply(this,arguments)}return t}(),getContractMethodArgsTypes:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,s){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","getContractMethodArgsTypes",[t,s]).then(function(e){return e.hasOwnProperty("result")?{success:!0,data:e.result}:{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),changeGas:function(e){this.gasNumber=Number(e)},showBook:function(){var e=Object(f["e"])(1);this.bookData=e.hasOwnProperty("contactList")?e.contactList:[],this.bookDialog=!0},handleClick:function(e){this.transferForm.toAddress=e.address,this.bookDialog=!1,this.changeParameter()},toUrl:function(e){this.$router.push({name:e})}}}}).call(this,s("1c35").Buffer)},aae3:function(e,t,s){var r=s("d3f4"),a=s("2d95"),n=s("2b4c")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==a(e))}}}]);
//# sourceMappingURL=chunk-56fd5582.7f150154.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6806040c"],{"0a90":function(e,t,s){var r=s("63b6"),a=s("10ff");r(r.G+r.F*(parseFloat!=a),{parseFloat:a})},"0d40":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.transferLoading,expression:"transferLoading"}],staticClass:"transfer bg-gray"},[s("h3",{staticClass:"title"},[e._v(e._s(e.changeAssets.account)+" "+e._s(e.$t("nav.transfer")))]),s("div",{staticClass:"w1200 bg-white"},[s("el-form",{ref:"transferForm",attrs:{model:e.transferForm,rules:e.transferRules}},[s("el-form-item",{attrs:{label:e.$t("transfer.transfer0")}},[s("el-input",{attrs:{disabled:""},model:{value:e.transferForm.fromAddress,callback:function(t){e.$set(e.transferForm,"fromAddress","string"===typeof t?t.trim():t)},expression:"transferForm.fromAddress"}})],1),s("el-form-item",{attrs:{label:e.$t("transfer.transfer1"),prop:"toAddress"}},[s("el-input",{on:{change:e.changeParameter},model:{value:e.transferForm.toAddress,callback:function(t){e.$set(e.transferForm,"toAddress","string"===typeof t?t.trim():t)},expression:"transferForm.toAddress"}},[s("i",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"iconfont iconlianxiren click",attrs:{slot:"suffix"},on:{click:e.showBook},slot:"suffix"})])],1),s("el-form-item",{attrs:{label:e.$t("transfer.transfer2")}},[s("el-select",{attrs:{disabled:e.contractInfo.success},on:{change:e.changeType},model:{value:e.transferForm.type,callback:function(t){e.$set(e.transferForm,"type",t)},expression:"transferForm.type"}},e._l(e.assetsList,function(t){return s("el-option",{key:1===t.type?t.chainId:t.contractAddress,attrs:{label:t.symbol,disabled:e.isCross&&2===t.type,value:t}})}),1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isCross,expression:"isCross"}],staticClass:"cross yellow font12"},[e._v("\n        "+e._s(e.$t("transfer.transfer15"))+"\n      ")]),s("el-form-item",{attrs:{label:e.$t("transfer.transfer3"),prop:"amount"}},[s("span",{staticClass:"balance font12 fr"},[e._v(e._s(e.$t("public.usableBalance"))+": "+e._s(e.changeAssets.balance))]),s("el-input",{on:{change:e.changeParameter},model:{value:e.transferForm.amount,callback:function(t){e.$set(e.transferForm,"amount",t)},expression:"transferForm.amount"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:1!==e.changeAssets.type,expression:"changeAssets.type !== 1"}],staticClass:"div-senior"},[s("el-form-item",{staticClass:"senior",attrs:{label:e.$t("call.call3")}},[s("el-switch",{model:{value:e.transferForm.senior,callback:function(t){e.$set(e.transferForm,"senior",t)},expression:"transferForm.senior"}})],1),e.transferForm.senior?s("div",{staticClass:"senior-div"},[s("el-form-item",{attrs:{label:"Gas Limit",prop:"gas"}},[s("el-input",{on:{change:e.changeGas},model:{value:e.transferForm.gas,callback:function(t){e.$set(e.transferForm,"gas",t)},expression:"transferForm.gas"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.gasTips,expression:"gasTips"}],staticClass:"font12 yellow"},[e._v(e._s(e.$t("call.call10")))])],1),s("el-form-item",{attrs:{label:"Price",prop:"price"}},[s("el-input",{model:{value:e.transferForm.price,callback:function(t){e.$set(e.transferForm,"price",t)},expression:"transferForm.price"}})],1)],1):e._e()],1),s("div",{staticClass:"cb"}),s("el-form-item",{attrs:{label:e.$t("transfer.transfer4")}},[s("el-input",{attrs:{type:"textarea",maxlength:"200","show-word-limit":""},model:{value:e.transferForm.remarks,callback:function(t){e.$set(e.transferForm,"remarks",t)},expression:"transferForm.remarks"}})],1),s("div",{staticClass:"font14"},[s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.$t("transfer.transfer5")))]),s("i",{staticClass:"el-icon-warning"})]),e._v("\n        "+e._s(e.$t("public.fee"))+": "+e._s(e.fee)+"\n        "),s("span",{staticClass:"fCN"},[e._v(e._s(e.feeSymbol))])],1),s("el-form-item",{staticClass:"form-next"},[s("el-button",{attrs:{type:"success",disabled:e.isNext},on:{click:function(t){return e.submitForm("transferForm")}}},[e._v(e._s(e.$t("public.next"))+"\n        ")])],1)],1)],1),s("Password",{ref:"password",on:{passwordSubmit:e.passSubmit}}),s("el-dialog",{staticClass:"confirm-dialog",attrs:{title:e.$t("transfer.transfer6"),visible:e.transferVisible,width:"40rem"},on:{"update:visible":function(t){e.transferVisible=t}}},[s("div",{staticClass:"bg-white"},[s("div",{staticClass:"div-data"},[s("p",[e._v(e._s(e.$t("transfer.transfer0"))+" ")]),s("label",[e._v(e._s(e.transferForm.fromAddress))])]),s("div",{staticClass:"div-data"},[s("p",[e._v(e._s(e.$t("transfer.transfer1"))+" ")]),s("label",[e._v(e._s(e.transferForm.toAddress))])]),s("div",{staticClass:"div-data"},[s("p",[e._v(e._s(e.$t("public.fee"))+":  ")]),s("label",[e._v(e._s(e.fee)+" "),s("span",{staticClass:"fCN"},[e._v(e._s(e.feeSymbol))])])]),s("div",{staticClass:"div-data"},[s("p",[e._v(e._s(e.$t("tab.tab6"))+": ")]),s("label",{staticClass:"yellow"},[e._v(e._s(e.transferForm.amount)+" "),s("span",{staticClass:"fCN"},[e._v(e._s(e.changeAssets.account))])])]),s("div",{staticClass:"div-data"},[s("p",[e._v(e._s(e.$t("transfer.transfer4"))+" ")]),s("label",[e._v(e._s(e.transferForm.remarks))])])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.transferVisible=!1}}},[e._v(e._s(e.$t("transfer.transfer7")))]),s("el-button",{attrs:{type:"success"},on:{click:e.confirmTraanser}},[e._v(e._s(e.$t("transfer.transfer8")))])],1)])],1)},a=[],n=s("9acd"),o=n["a"],i=(s("3fbe"),s("2877")),c=Object(i["a"])(o,r,a,!1,null,null,null);t["default"]=c.exports},"10ff":function(e,t,s){var r=s("e53d").parseFloat,a=s("a1ce").trim;e.exports=1/r(s("e692")+"-0")!==-1/0?function(e){var t=a(String(e),3),s=r(t);return 0===s&&"-"==t.charAt(0)?-0:s}:r},"188a":function(e,t,s){},1959:function(e,t,s){"use strict";s.d(t,"h",function(){return o}),s.d(t,"d",function(){return i}),s.d(t,"c",function(){return c}),s.d(t,"g",function(){return u}),s.d(t,"f",function(){return f}),s.d(t,"j",function(){return h}),s.d(t,"b",function(){return m}),s.d(t,"i",function(){return g}),s.d(t,"a",function(){return w}),s.d(t,"e",function(){return x});s("c5f6"),s("96cf");var r=s("3b8d"),a=s("9f30"),n=s("6ace");function o(e){return 2===e}function i(e,t){var s=e.txSerialize().length;return s+=110*t,1e5*Math.ceil(s/1024)}function c(e,t){var s=e.txSerialize().length;return s+=110*t,1e6*Math.ceil(s/1024)}function u(e,t,s){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(regeneratorRuntime.mark(function e(t,s,r){var a,o,i,c,u,d,l,h;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=Number(Object(n["b"])(t.amount,t.fee)),o=0,i=s.nonce,c=t.amount,u=0,6===r&&2===r){e.next=8;break}if(!(s.balance<a)){e.next=8;break}return e.abrupt("return",{success:!1,data:"Your balance is not enough."});case 8:if(4===r?u=-1:5===r?u=-1:6===r?(a=t.amount,o=-1,i=t.depositHash.substring(t.depositHash.length-16),c=t.amount-t.fee):9===r&&(a=t.amount,o=-1,i=t.depositHash.substring(t.depositHash.length-16),c=t.amount-t.fee,u=(new Date).valueOf()+2592e5),d=[{address:t.fromAddress,assetsChainId:t.assetsChainId,assetsId:t.assetsId,amount:a,locked:o,nonce:i}],2!==r||t.assetsChainId===Object(n["f"])()){e.next=19;break}return d[0].amount=t.amount,e.next=14,f(Object(n["f"])(),t.assetsId,t.fromAddress);case 14:if(l=e.sent,!(l.data.balance<1e5)){e.next=18;break}return console.log("余额小于手续费"),e.abrupt("return");case 18:d.push({address:t.fromAddress,assetsChainId:Object(n["f"])(),assetsId:t.assetsId,amount:1e5,locked:o,nonce:l.data.nonce});case 19:if(h=[],15!==r&&17!==r){e.next=22;break}return e.abrupt("return",{success:!0,data:{inputs:d,outputs:h}});case 22:if(16!==r){e.next=28;break}if(t.toAddress){e.next=27;break}return e.abrupt("return",{success:!0,data:{inputs:d,outputs:h}});case 27:c=t.value;case 28:return h=[{address:t.toAddress?t.toAddress:t.fromAddress,assetsChainId:t.assetsChainId,assetsId:t.assetsId,amount:c,lockTime:u}],e.abrupt("return",{success:!0,data:{inputs:d,outputs:h}});case 30:case"end":return e.stop()}},e)})),d.apply(this,arguments)}function f(){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,s,r,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:2,s=n.length>1&&void 0!==n[1]?n[1]:1,r=n.length>2?n[2]:void 0,e.next=5,Object(a["a"])("/","getAccountBalance",[t,s,r]).then(function(e){return e.hasOwnProperty("result")?{success:!0,data:{balance:e.result.balance,nonce:e.result.nonce}}:{success:!1,data:e}}).catch(function(e){return{success:!1,data:e}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)})),l.apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])("/","validateTx",[t]).then(function(e){return e.hasOwnProperty("result")?{success:!0,data:e.result}:{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),p.apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])("/","broadcastTx",[t]).then(function(e){return e.hasOwnProperty("result")?{success:!0,data:e.result}:{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),b.apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return v=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])("/","validateTx",[t]).then(function(e){if(e.hasOwnProperty("result")){var s=e.result.value;return Object(a["a"])("/","broadcastTx",[t]).then(function(e){return e.hasOwnProperty("result")?{success:!0,hash:s}:{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}})}return{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),v.apply(this,arguments)}function w(e){return y.apply(this,arguments)}function y(){return y=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])("/","getConsensusDeposit",[1,300,t]).then(function(e){return e.result}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),y.apply(this,arguments)}function x(e){return k.apply(this,arguments)}function k(){return k=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])("/","getContractConstructor",[t]).then(function(e){return e.hasOwnProperty("result")?{success:!0,data:e.result.constructor}:{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),k.apply(this,arguments)}},"243f":function(e,t,s){},"3fbe":function(e,t,s){"use strict";var r=s("243f"),a=s.n(r);a.a},"59ad":function(e,t,s){e.exports=s("7be7")},7672:function(e,t,s){"use strict";var r=s("188a"),a=s.n(r);a.a},"7be7":function(e,t,s){s("0a90"),e.exports=s("584a").parseFloat},"9acd":function(e,t,s){"use strict";(function(e){var r,a=s("bd86"),n=(s("6b54"),s("06db"),s("7f7f"),s("96cf"),s("3b8d")),o=s("5d73"),i=s.n(o),c=(s("c5f6"),s("59ad")),u=s.n(c),d=s("0ad0"),f=s.n(d),l=s("b8d7"),h=s.n(l),p=s("e065"),m=s.n(p),b=s("1959"),g=s("db49"),v=s("6ace"),w=s("d1f0");t["a"]={data:function(){var e=this,t=function(t,s,r){var a=/^(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{20,50}$/;""===s?r(new Error(e.$t("transfer.transfer9"))):a.exec(s)?r():r(new Error(e.$t("transfer.transfer10")))},s=function(t,s,r){var a=/^([1-9][\d]{0,72}|0)(\.[\d]{1,72})?$/;""===s?r(new Error(e.$t("transfer.transfer11"))):a.exec(s)?u()(s)<.001?r(new Error(e.$t("transfer.transfer13"))):setTimeout(function(){Number(s)>Number(e.changeAssets.balance)?r(new Error(e.$t("transfer.transfer14"))):r()},200):r(new Error(e.$t("transfer.transfer12")))},r=function(t,s,r){s?s<1||s>1e7?r(new Error(e.$t("deploy.deploy81"))):r():r(new Error(e.$t("deploy.deploy8")))},a=function(t,s,r){s?s<1?r(new Error(e.$t("deploy.deploy91"))):r():r(new Error(e.$t("deploy.deploy9")))};return{addressInfo:"",balanceInfo:"",assetsList:[],changeAssets:{},gasNumber:0,oldGasNumber:0,gasTips:!1,transferForm:{fromAddress:"",toAddress:"",type:this.$route.query.accountType?this.$route.query.accountType:"NULS",amount:"",senior:!1,gas:this.gasNumber,price:h.a.CONTRACT_MINIMUM_PRICE,remarks:""},transferRules:{toAddress:[{validator:t,trigger:["blur","change"]}],amount:[{validator:s,trigger:["blur","change"]}],gas:[{validator:r,trigger:["blur","change"]}],price:[{validator:a,trigger:"blur"}]},fee:.001,feeSymbol:"NULS",contractInfo:{},transferVisible:!1,isCross:!1,isNext:!1,transferLoading:!1}},created:function(){var e=this;this.addressInfo=Object(v["e"])(1),setInterval(function(){e.addressInfo=Object(v["e"])(1)},500),this.transferForm.fromAddress=this.addressInfo.address,this.getCapitalListByAddress(this.transferForm.fromAddress)},mounted:function(){},watch:{addressInfo:function(e,t){e.address!==t.address&&t.address&&(this.transferForm.fromAddress=this.addressInfo.address,this.getCapitalListByAddress(this.transferForm.fromAddress),this.changeParameter())},gasNumber:function(e,t){t&&this.oldGasNumber>e?this.gasTips=!0:this.gasTips=!1}},components:{Password:w["a"]},methods:(r={getSymbol:function(){var e=!0,t=!1,s=void 0;try{for(var r,a=i()(this.assetsList);!(e=(r=a.next()).done);e=!0){var n=r.value;n.chainId===Object(v["f"])()&&1===n.type&&(this.feeSymbol=n.symbol)}}catch(o){t=!0,s=o}finally{try{e||null==a.return||a.return()}finally{if(t)throw s}}},getCapitalListByAddress:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var s,r,a,n,o,c,u,d,f,l,h,p,m=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.assetsList=[],s=[],r=2,e.next=5,this.$post("/","getAccountLedgerList",[t]).then(function(e){if(e.hasOwnProperty("result")){var t=!0,a=!1,n=void 0;try{for(var o,c=i()(e.result);!(t=(o=c.next()).done);t=!0){var u=o.value;s.push({type:1,symbol:u.symbol,chainId:u.chainId,assetId:u.assetId,balance:Object(v["o"])(u.balance)}),r=u.chainId}}catch(d){a=!0,n=d}finally{try{t||null==c.return||c.return()}finally{if(a)throw n}}}}).catch(function(e){console.log("getAccountLedgerList:"+e),m.assetsListLoading=!1});case 5:return a=[],e.next=8,this.$post("/","getAccountTokens",[1,100,t]).then(function(e){if(e.hasOwnProperty("result")){var t=!0,s=!1,n=void 0;try{for(var o,c=i()(e.result.list);!(t=(o=c.next()).done);t=!0){var u=o.value;a.push({type:2,symbol:u.tokenSymbol,chainId:r,balance:Object(v["o"])(u.balance,u.decimals),contractAddress:u.contractAddress,decimals:u.decimals})}}catch(d){s=!0,n=d}finally{try{t||null==c.return||c.return()}finally{if(s)throw n}}}}).catch(function(e){console.log("getAccountTokens:"+e)});case 8:return n=[],e.next=11,this.$post("/","getAccountCrossLedgerList",[t]).then(function(e){if(e.hasOwnProperty("result")){var t=!0,s=!1,r=void 0;try{for(var a,o=i()(e.result);!(t=(a=o.next()).done);t=!0){var c=a.value;n.push({type:1,symbol:c.symbol,chainId:c.chainId,assetId:c.assetId,balance:Object(v["o"])(c.balance)})}}catch(u){s=!0,r=u}finally{try{t||null==o.return||o.return()}finally{if(s)throw r}}}}).catch(function(e){console.log("getAccountCrossLedgerList:"+e)});case 11:for(this.assetsList=[].concat(s,a,n),o=!1,c=!0,u=!1,d=void 0,e.prev=16,f=i()(this.assetsList);!(c=(l=f.next()).done);c=!0)h=l.value,"NULS"===h.symbol&&(o=!0);e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](16),u=!0,d=e.t0;case 24:e.prev=24,e.prev=25,c||null==f.return||f.return();case 27:if(e.prev=27,!u){e.next=30;break}throw d;case 30:return e.finish(27);case 31:return e.finish(24);case 32:o||(p={type:1,symbol:"NULS",chainId:2,assetId:1,balance:0},this.assetsList.unshift(p)),this.changeNuls(0),this.getSymbol();case 35:case"end":return e.stop()}},e,this,[[16,20,24,32],[25,,27,31]])}));function t(t){return e.apply(this,arguments)}return t}(),changeParameter:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,s,r,a,n,o,c,u,d,l,p,m,b,g,w,y,x,k,I,A,C,O,F,$,j=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.transferForm.toAddress){e.next=84;break}if(this.contractInfo={},t=f.a.verifyAddress(this.transferForm.fromAddress),s=f.a.verifyAddress(this.transferForm.toAddress),2!==s.type){e.next=36;break}return this.changeNuls(),e.next=8,this.contractInfoByContractAddress(this.transferForm.toAddress);case 8:if(r=e.sent,0===r.length){e.next=33;break}for(a=!1,n=!0,o=!1,c=void 0,e.prev=14,u=i()(r);!(n=(d=u.next()).done);n=!0)l=d.value,"_payable"===l.name&&(a=!0);e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](14),o=!0,c=e.t0;case 22:e.prev=22,e.prev=23,n||null==u.return||u.return();case 25:if(e.prev=25,!o){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:a?this.transferForm.amount&&(this.transferForm.gas=h.a.CONTRACT_MAX_GASLIMIT,this.$refs["transferForm"].validate(function(e){if(!e)return!1;var t=h.a.CONTRACT_MAX_GASLIMIT,s=j.transferForm.price,r=j.contractInfo.contractAddress,a="_payable",n="",o=[];j.validateContractCall(j.addressInfo.address,Number(Object(v["d"])(j.transferForm.amount,1e8)),t,s,r,a,n,o)})):this.$message({message:"此合约没有_payable方法不能向此合约地址转账",type:"error",duration:2e3}),e.next=34;break;case 33:this.$message({message:"此合约没有方法不能向此合约地址转账",type:"error",duration:2e3});case 34:e.next=84;break;case 36:if(t.chainId!==s.chainId){e.next=61;break}for(this.isCross=!1,this.fee=.001,this.getSymbol(),p=!0,m=!1,b=void 0,e.prev=43,g=i()(this.assetsList);!(p=(w=g.next()).done);p=!0)y=w.value,y.chainId===Object(v["f"])()&&1===y.type&&(Number(y.balance)<.001?(this.isNext=!0,this.$message({message:this.$t("transfer.transfer17"),type:"error",duration:2e3})):this.isNext=!1);e.next=51;break;case 47:e.prev=47,e.t1=e["catch"](43),m=!0,b=e.t1;case 51:e.prev=51,e.prev=52,p||null==g.return||g.return();case 54:if(e.prev=54,!m){e.next=57;break}throw b;case 57:return e.finish(54);case 58:return e.finish(51);case 59:e.next=84;break;case 61:for(this.isCross=!0,this.fee=.01,this.feeSymbol="NULS",2===this.changeAssets.type&&this.changeNuls(),x=!0,k=!1,I=void 0,e.prev=68,A=i()(this.assetsList);!(x=(C=A.next()).done);x=!0)O=C.value,F="NULS"===O.symbol&&Number(O.balance)<.01,$=Object(v["f"])()===O.chainId&&Number(O.balance)<.01,F?(this.isNext=!0,this.$message({message:this.$t("transfer.transfer16"),type:"error",duration:2e3})):$&&(this.isNext=!0,this.$message({message:this.$t("transfer.transfer17"),type:"error",duration:2e3}));e.next=76;break;case 72:e.prev=72,e.t2=e["catch"](68),k=!0,I=e.t2;case 76:e.prev=76,e.prev=77,x||null==A.return||A.return();case 79:if(e.prev=79,!k){e.next=82;break}throw I;case 82:return e.finish(79);case 83:return e.finish(76);case 84:1!==this.changeAssets.type?(this.transferForm.gas=h.a.CONTRACT_MAX_GASLIMIT,this.$refs["transferForm"].validate(function(e){if(!e)return!1;var t=h.a.CONTRACT_MAX_GASLIMIT,s=j.transferForm.price,r=j.changeAssets.contractAddress,a="transfer",n="",o=[j.transferForm.toAddress,Number(Object(v["d"])(j.transferForm.amount,Number(Object(v["c"])(j.changeAssets.decimals))))];j.validateContractCall(j.addressInfo.address,0,t,s,r,a,n,o)})):this.$refs["transferForm"].validate();case 85:case"end":return e.stop()}},e,this,[[14,18,22,30],[23,,25,29],[43,47,51,59],[52,,54,58],[68,72,76,84],[77,,79,83]])}));function t(){return e.apply(this,arguments)}return t}(),contractInfoByContractAddress:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","getContract",[t]).then(function(e){return e.hasOwnProperty("result")?(s.contractInfo=e.result,e.result.methods):[]}).catch(function(e){return console.log(e),[]});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changeType:function(e){this.changeParameter(),1===e.type?(this.transferForm.gas=5e3,this.transferForm.price=25):(this.transferForm.gas=0,this.transferForm.price=h.a.CONTRACT_MINIMUM_PRICE),this.changeAssets=e,this.transferForm.type=e.symbol},changeNuls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="NULS";0===e&&this.$route.query.accountType&&(t=this.$route.query.accountType);var s=!0,r=!1,a=void 0;try{for(var n,o=i()(this.assetsList);!(s=(n=o.next()).done);s=!0){var c=n.value;c.symbol===t&&(this.changeAssets=c,this.transferForm.type=c.symbol)}}catch(u){r=!0,a=u}finally{try{s||null==o.return||o.return()}finally{if(r)throw a}}},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.transferVisible=!0})},confirmTraanser:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.getNulsBalance(this.changeAssets.chainId,1,this.transferForm.fromAddress),this.$refs.password.showPassword(!0);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getNulsBalance:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,s,r){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["f"])(t,s,r).then(function(e){e.success?a.balanceInfo=e.data:a.$message({message:a.$t("public.err")+e,type:"error",duration:1e3})}).catch(function(e){a.$message({message:a.$t("public.err0")+e,type:"error",duration:1e3})});case 2:case"end":return e.stop()}},e)}));function t(t,s,r){return e.apply(this,arguments)}return t}(),getContractMethodArgsTypes:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,s){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","getContractMethodArgsTypes",[t,s]).then(function(e){return e.hasOwnProperty("result")?{success:!0,data:e.result}:{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),passSubmit:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var s,r,a,n,o,i,c,u,d=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=f.a.decrypteOfAES(this.addressInfo.aesPri,t),r=f.a.importByKey(this.addressInfo.chainId,s,t),a="",r.address!==this.addressInfo.address){e.next=94;break}if(this.transferVisible=!1,this.transferLoading=!0,n={fromAddress:this.transferForm.fromAddress,assetsChainId:this.changeAssets.chainId,assetsId:1,fee:1e4},o={},i=[],!this.contractInfo.success){e.next=22;break}return this.contractCallData.chainId=2,n["amount"]=Number(Object(v["b"])(Number(Object(v["d"])(this.transferForm.amount,1e8)),Number(Object(v["d"])(this.transferForm.gas,this.transferForm.price)))),n.toAddress=this.contractInfo.contractAddress,n.value=Number(Object(v["d"])(this.transferForm.amount,1e8)),e.next=16,Object(b["g"])(n,this.balanceInfo,16);case 16:return o=e.sent,e.next=19,f.a.transactionAssemble(o.data.inputs,o.data.outputs,this.transferForm.remarks,16,this.contractCallData);case 19:i=e.sent,e.next=50;break;case 22:if(1!==this.changeAssets.type||this.isCross){e.next=33;break}return n["toAddress"]=this.transferForm.toAddress,n["amount"]=Number(Object(v["d"])(this.transferForm.amount,1e8).toString()),e.next=27,Object(b["g"])(n,this.balanceInfo,2);case 27:return o=e.sent,e.next=30,f.a.transactionAssemble(o.data.inputs,o.data.outputs,this.transferForm.remarks,2);case 30:i=e.sent,e.next=50;break;case 33:if(1!==this.changeAssets.type||!this.isCross){e.next=43;break}return n["toAddress"]=this.transferForm.toAddress,n["amount"]=Number(Object(v["d"])(this.transferForm.amount,1e8).toString()),n["remark"]=this.transferForm.remarks,n.fee=1e6,e.next=40,this.crossTxhexs(s,this.addressInfo.pub,this.addressInfo.chainId,n);case 40:a=e.sent,e.next=50;break;case 43:return n["amount"]=Number(Object(v["b"])(0,Number(Object(v["d"])(this.transferForm.gas,this.transferForm.price)))),e.next=46,Object(b["g"])(n,this.balanceInfo,16);case 46:return o=e.sent,e.next=49,f.a.transactionAssemble(o.data.inputs,o.data.outputs,this.transferForm.remarks,16,this.contractCallData);case 49:i=e.sent;case 50:if(c="",1!==this.changeAssets.type||!this.isCross){e.next=55;break}c=a,e.next=90;break;case 55:if(u=Object(b["d"])(i,1),n.fee===u){e.next=87;break}if(n.fee=u,!this.contractInfo.success){e.next=67;break}return e.next=61,Object(b["g"])(n,this.balanceInfo,16);case 61:return o=e.sent,e.next=64,f.a.transactionAssemble(o.data.inputs,o.data.outputs,this.transferForm.remarks,16,this.contractCallData);case 64:i=e.sent,e.next=82;break;case 67:if(1!==this.changeAssets.type){e.next=76;break}return e.next=70,Object(b["g"])(n,this.balanceInfo,2);case 70:return o=e.sent,e.next=73,f.a.transactionAssemble(o.data.inputs,o.data.outputs,this.transferForm.remarks,2);case 73:i=e.sent,e.next=82;break;case 76:return e.next=78,Object(b["g"])(n,this.balanceInfo,16);case 78:return o=e.sent,e.next=81,f.a.transactionAssemble(o.data.inputs,o.data.outputs,this.transferForm.remarks,16,this.contractCallData);case 81:i=e.sent;case 82:return e.next=84,f.a.transactionSerialize(f.a.decrypteOfAES(this.addressInfo.aesPri,t),this.addressInfo.pub,i);case 84:c=e.sent,e.next=90;break;case 87:return e.next=89,f.a.transactionSerialize(f.a.decrypteOfAES(this.addressInfo.aesPri,t),this.addressInfo.pub,i);case 89:c=e.sent;case 90:return e.next=92,Object(b["i"])(c).then(function(e){d.transferLoading=!1,e.success?d.toUrl("txList"):d.$message({message:d.$t("error."+e.data.code),type:"error",duration:3e3})}).catch(function(e){d.transferLoading=!1,d.$message({message:d.$t("public.err1")+e,type:"error",duration:1e3})});case 92:e.next=95;break;case 94:this.$message({message:this.$t("address.address13"),type:"error",duration:1e3});case 95:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),crossTxhexs:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(r,a,n,o){var i,c,u,d,l,h,p,m,g,v,w,y,x,k,I,A,C;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(b["f"])(o.assetsChainId,o.assetsId,o.fromAddress);case 2:return i=t.sent,c=[],u=[{address:o.toAddress?o.toAddress:o.fromAddress,assetsChainId:o.assetsChainId,assetsId:o.assetsId,amount:o.amount,lockTime:0}],t.next=7,Object(b["f"])(2,1,o.fromAddress);case 7:if(d=t.sent,Object(b["h"])(n)){t.next=12;break}if(!(d.data.balance<o.fee)){t.next=12;break}return console.log("余额不足"),t.abrupt("return");case 12:if(n!==o.assetsChainId||1!==o.assetsId){t.next=21;break}if(h=o.amount+o.fee,!(i.data.balance<o.amount+o.fee)){t.next=17;break}return console.log("余额不足"),t.abrupt("return");case 17:c.push({address:o.fromAddress,assetsChainId:o.assetsChainId,assetsId:o.assetsId,amount:h,locked:0,nonce:i.data.nonce}),Object(b["h"])(n)||c.push({address:o.fromAddress,assetsChainId:2,assetsId:1,amount:o.fee,locked:0,nonce:d.data.nonce}),t.next=38;break;case 21:return t.next=23,Object(b["f"])(n,1,o.fromAddress);case 23:if(l=t.sent,!(l.data.balance<o.fee)){t.next=27;break}return console.log("该账户本链主资产不足够支付手续费！"),t.abrupt("return");case 27:if(2!==o.assetsChainId||1!==o.assetsId){t.next=35;break}if(p=o.amount+o.fee,!(d.data.balance<p)){t.next=32;break}return console.log("余额不足"),t.abrupt("return");case 32:c.push({address:o.fromAddress,assetsChainId:o.assetsChainId,assetsId:o.assetsId,amount:p,locked:0,nonce:d.data.nonce}),t.next=37;break;case 35:c.push({address:o.fromAddress,assetsChainId:o.assetsChainId,assetsId:o.assetsId,amount:o.amount,locked:0,nonce:i.data.nonce}),c.push({address:o.fromAddress,assetsChainId:2,assetsId:1,amount:o.fee,locked:0,nonce:d.data.nonce});case 37:Object(b["h"])(n)||c.push({address:o.fromAddress,assetsChainId:n,assetsId:1,amount:o.fee,locked:0,nonce:l.data.nonce});case 38:return t.next=40,f.a.transactionAssemble(c,u,o.remark,10);case 40:if(m=t.sent,g="",v="",w=s("4077"),y=s("a648"),x=new y,k=new w.CrossChainTransaction,I=e.from(a,"hex"),A=0,Object(b["h"])(n)?A=Object(b["c"])(m,1):(A=Object(b["c"])(m,2),k.time=m.time,k.remark=m.remark,C=[],2===o.assetsChainId&&1===o.assetsId?C.push({address:o.fromAddress,assetsChainId:o.assetsChainId,assetsId:o.assetsId,amount:o.amount+A,locked:0,nonce:d.data.nonce}):C=[{address:o.fromAddress,assetsChainId:o.assetsChainId,assetsId:o.assetsId,amount:o.amount,locked:0,nonce:i.data.nonce},{address:o.fromAddress,assetsChainId:2,assetsId:1,amount:A,locked:0,nonce:d.data.nonce}],k.setCoinData(C,u)),o.fee===A){t.next=78;break}if(n!==o.assetsChainId||1!==o.assetsId){t.next=59;break}if(!(i.data.balance<o.amount+A)){t.next=55;break}return console.log("余额不足"),t.abrupt("return");case 55:c[0].amount=o.amount+A,Object(b["h"])(n)||(c[1].amount=A),t.next=72;break;case 59:if(!(l.data.balance<o.fee)){t.next=62;break}return console.log("该账户本链主资产不足够支付手续费！"),t.abrupt("return");case 62:if(2!==o.assetsChainId||1!==o.assetsId){t.next=70;break}if(!(d.data.balance<o.amount+A)){t.next=66;break}return console.log("余额不足"),t.abrupt("return");case 66:c[0].amount=o.amount+A,c[1].amount=A,t.next=72;break;case 70:c[1].amount=A,c[2].amount=A;case 72:return t.next=74,f.a.transactionAssemble(c,u,o.remark,10);case 74:m=t.sent,g=f.a.transactionSignature(r,m),t.next=79;break;case 78:g=f.a.transactionSignature(r,m);case 79:return x.writeBytesWithLength(I),x.writeBytesWithLength(g),Object(b["h"])()||(k.txData=m.getHash(),v=f.a.transactionSignature(r,k),x.writeBytesWithLength(I),x.writeBytesWithLength(v)),m.signatures=x.getBufWriter().toBuffer(),t.abrupt("return",m.txSerialize().toString("hex"));case 84:case"end":return t.stop()}},t)}));function r(e,s,r,a){return t.apply(this,arguments)}return r}(),validateContractCall:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,s,r,a,n,o,i,c){var u=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","validateContractCall",[t,s,r,a,n,o,i,c]).then(function(e){e.hasOwnProperty("result")?u.imputedContractCallGas(t,s,n,o,i,c):console.log("验证调用合约交易错误")}).catch(function(e){console.log("验证调用合约交易异常"+e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,s,r,a,n,o,i,c){return e.apply(this,arguments)}return t}(),imputedContractCallGas:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,s,r,a,n,o){var i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","imputedContractCallGas",[t,s,r,a,n,o]).then(function(e){if(e.hasOwnProperty("result")){i.gasNumber=e.result.gasLimit,i.oldGasNumber=e.result.gasLimit,i.transferForm.gas=e.result.gasLimit;var c=i.getContractMethodArgsTypes(r,a),u=m.a.twoDimensionalArray(o,c);i.contractCallData={chainId:g["b"],sender:t,contractAddress:r,value:s,gasLimit:i.transferForm.gas,price:i.transferForm.price,methodName:a,methodDesc:n,args:u}}else console.log("预估调用合约交易的gas错误")}).catch(function(e){console.log("预估调用合约交易的gas异常"+e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,s,r,a,n,o){return e.apply(this,arguments)}return t}()},Object(a["a"])(r,"getContractMethodArgsTypes",function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,s){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","getContractMethodArgsTypes",[t,s]).then(function(e){return e.hasOwnProperty("result")?{success:!0,data:e.result}:{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}()),Object(a["a"])(r,"changeGas",function(e){this.gasNumber=Number(e)}),Object(a["a"])(r,"showBook",function(){this.$message({message:"开发中......",duration:1e3})}),Object(a["a"])(r,"toUrl",function(e){this.$router.push({name:e})}),r)}}).call(this,s("b639").Buffer)},a1ce:function(e,t,s){var r=s("63b6"),a=s("25eb"),n=s("294c"),o=s("e692"),i="["+o+"]",c="​",u=RegExp("^"+i+i+"*"),d=RegExp(i+i+"*$"),f=function(e,t,s){var a={},i=n(function(){return!!o[e]()||c[e]()!=c}),u=a[e]=i?t(l):o[e];s&&(a[s]=u),r(r.P+r.F*i,"String",a)},l=f.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(d,"")),e};e.exports=f},d1f0:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{staticClass:"password-dialog",attrs:{title:e.$t("password.password1"),visible:e.passwordVisible,top:"30vh",width:"30rem","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.passwordVisible=t},open:e.passwordShow,close:e.passwordClose}},[s("el-form",{ref:"passwordForm",attrs:{model:e.passwordForm,rules:e.passwordRules},nativeOn:{submit:function(e){e.preventDefault()}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(e.$t("password.password1")))]),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{ref:"inpus",attrs:{type:"password",maxlength:22},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterSubmit("passwordForm")}},model:{value:e.passwordForm.password,callback:function(t){e.$set(e.passwordForm,"password",t)},expression:"passwordForm.password"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.passwordClose}},[e._v(e._s(e.$t("password.password2")))]),s("el-button",{attrs:{type:"success",id:"passwordInfo"},on:{click:function(t){return e.dialogSubmit("passwordForm")}}},[e._v(e._s(e.$t("password.password3"))+"\n    ")])],1)],1)},a=[],n={props:{},data:function(){var e=this,t=function(t,s,r){""===s?r(new Error(e.$t("password.password1"))):r()};return{passwordVisible:!1,passwordForm:{password:""},passwordRules:{password:[{validator:t,trigger:["blur","change"]}]}}},created:function(){},mounted:function(){},watch:{passwordVisible:function(e){var t=this;e&&setTimeout(function(){t.$refs["inpus"].focus()},200)}},methods:{enterSubmit:function(e){this.passwordForm.password&&this.dialogSubmit(e)},passwordShow:function(){},passwordClose:function(){this.$refs["passwordForm"].resetFields(),this.passwordVisible=!1},showPassword:function(e){this.passwordVisible=e},dialogSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$emit("passwordSubmit",t.passwordForm.password),t.passwordVisible=!1})}}},o=n,i=(s("7672"),s("2877")),c=Object(i["a"])(o,r,a,!1,null,null,null);t["a"]=c.exports},e065:function(e,t,s){"use strict";function r(e){return null===e?null:e.toString()}function a(e){return null===e||0===e.trim.length}e.exports={stringToByte:function(e){var t=[],s=void 0,r=void 0;s=e.length;for(var a=0;a<s;a++)r=e.charCodeAt(a),r>=65536&&r<=1114111?(t.push(r>>18&7|240),t.push(r>>12&63|128),t.push(r>>6&63|128),t.push(63&r|128)):r>=2048&&r<=65535?(t.push(r>>12&15|224),t.push(r>>6&63|128),t.push(63&r|128)):r>=128&&r<=2047?(t.push(r>>6&31|192),t.push(63&r|128)):t.push(255&r);return t},twoDimensionalArray:function(e,t){if(null==e)return null;for(var s=e.length,n=new Array(s),o=void 0,i=0;i<s;i++)if(o=e[i],null!=o)if("String"===typeof o){var c=o;null!=t&&a(c)&&"String"!==t[i]?n[i]=[]:n[i]=[c]}else if(Array.isArray(o)){for(var u=o.length,d=new Array[u],f=0;f<u;f++)d[f]=r(o[f]);n[i]=d}else n[i]=[r(o)];else n[i]=[];return n}}},e692:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-6806040c.e85c2001.js.map
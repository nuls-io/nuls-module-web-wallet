(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-186cee8c"],{"033b":function(t,e,s){"use strict";var r=s("e0a2"),a=s.n(r);a.a},"188a":function(t,e,s){},1959:function(t,e,s){"use strict";s.d(e,"h",function(){return o}),s.d(e,"d",function(){return i}),s.d(e,"c",function(){return u}),s.d(e,"g",function(){return c}),s.d(e,"f",function(){return l}),s.d(e,"j",function(){return p}),s.d(e,"b",function(){return b}),s.d(e,"i",function(){return w}),s.d(e,"a",function(){return g}),s.d(e,"e",function(){return x});s("c5f6"),s("96cf");var r=s("3b8d"),a=s("9f30"),n=s("6ace");function o(t){return 2===t}function i(t,e){var s=t.txSerialize().length;return s+=110*e,1e5*Math.ceil(s/1024)}function u(t,e){var s=t.txSerialize().length;return s+=110*e,1e6*Math.ceil(s/1024)}function c(t,e,s){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(regeneratorRuntime.mark(function t(e,s,r){var a,o,i,u,c,d,f,p;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=Number(Object(n["b"])(e.amount,e.fee)),o=0,i=s.nonce,u=e.amount,c=0,6===r&&2===r){t.next=8;break}if(!(s.balance<a)){t.next=8;break}return t.abrupt("return",{success:!1,data:"Your balance is not enough."});case 8:if(4===r?c=-1:5===r?c=-1:6===r?(a=e.amount,o=-1,i=e.depositHash.substring(e.depositHash.length-16),u=e.amount-e.fee):9===r&&(a=e.amount,o=-1,i=e.depositHash.substring(e.depositHash.length-16),u=e.amount-e.fee,c=(new Date).valueOf()+2592e5),d=[{address:e.fromAddress,assetsChainId:e.assetsChainId,assetsId:e.assetsId,amount:a,locked:o,nonce:i}],2!==r||e.assetsChainId===Object(n["f"])()){t.next=19;break}return d[0].amount=e.amount,t.next=14,l(Object(n["f"])(),e.assetsId,e.fromAddress);case 14:if(f=t.sent,!(f.data.balance<1e5)){t.next=18;break}return console.log("余额小于手续费"),t.abrupt("return");case 18:d.push({address:e.fromAddress,assetsChainId:Object(n["f"])(),assetsId:e.assetsId,amount:1e5,locked:o,nonce:f.data.nonce});case 19:if(p=[],15!==r&&17!==r){t.next=22;break}return t.abrupt("return",{success:!0,data:{inputs:d,outputs:p}});case 22:if(16!==r){t.next=28;break}if(e.toAddress){t.next=27;break}return t.abrupt("return",{success:!0,data:{inputs:d,outputs:p}});case 27:u=e.value;case 28:return p=[{address:e.toAddress?e.toAddress:e.fromAddress,assetsChainId:e.assetsChainId,assetsId:e.assetsId,amount:u,lockTime:c}],t.abrupt("return",{success:!0,data:{inputs:d,outputs:p}});case 30:case"end":return t.stop()}},t)})),d.apply(this,arguments)}function l(){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,s,r,n=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:2,s=n.length>1&&void 0!==n[1]?n[1]:1,r=n.length>2?n[2]:void 0,t.next=5,Object(a["a"])("/","getAccountBalance",[e,s,r]).then(function(t){return t.hasOwnProperty("result")?{success:!0,data:{balance:t.result.balance,nonce:t.result.nonce}}:{success:!1,data:t}}).catch(function(t){return{success:!1,data:t}});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t)})),f.apply(this,arguments)}function p(t){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a["a"])("/","validateTx",[e]).then(function(t){return t.hasOwnProperty("result")?{success:!0,data:t.result}:{success:!1,data:t.error}}).catch(function(t){return{success:!1,data:t}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),h.apply(this,arguments)}function b(t){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a["a"])("/","broadcastTx",[e]).then(function(t){return t.hasOwnProperty("result")?{success:!0,data:t.result}:{success:!1,data:t.error}}).catch(function(t){return{success:!1,data:t}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),m.apply(this,arguments)}function w(t){return v.apply(this,arguments)}function v(){return v=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a["a"])("/","validateTx",[e]).then(function(t){if(t.hasOwnProperty("result")){var s=t.result.value;return Object(a["a"])("/","broadcastTx",[e]).then(function(t){return t.hasOwnProperty("result")?{success:!0,hash:s}:{success:!1,data:t.error}}).catch(function(t){return{success:!1,data:t}})}return{success:!1,data:t.error}}).catch(function(t){return{success:!1,data:t}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),v.apply(this,arguments)}function g(t){return y.apply(this,arguments)}function y(){return y=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a["a"])("/","getConsensusDeposit",[1,300,e]).then(function(t){return t.result}).catch(function(t){return{success:!1,data:t}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),y.apply(this,arguments)}function x(t){return k.apply(this,arguments)}function k(){return k=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a["a"])("/","getContractConstructor",[e]).then(function(t){return t.hasOwnProperty("result")?{success:!0,data:t.result.constructor}:{success:!1,data:t.error}}).catch(function(t){return{success:!1,data:t}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),k.apply(this,arguments)}},"2e64":function(t,e,s){"use strict";var r=s("ff03"),a=s.n(r);a.a},7672:function(t,e,s){"use strict";var r=s("188a"),a=s.n(r);a.a},b301:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"back",attrs:{backUrl:t.backUrl}},[s("span",{staticClass:"back-box",on:{click:t.back}},[s("i",{staticClass:"el-icon-arrow-left"}),s("span",[t._v(t._s(t.backTitle))])])])},a=[],n={props:{backTitle:{type:String,default:""},backUrl:{type:String,default:"1"},backParams:{type:String,default:""}},methods:{back:function(){"1"===this.backUrl?this.$router.go(-1):this.$router.push({name:this.backUrl})}}},o=n,i=(s("2e64"),s("2877")),u=Object(i["a"])(o,r,a,!1,null,null,null);e["a"]=u.exports},d1f0:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{staticClass:"password-dialog",attrs:{title:t.$t("password.password1"),visible:t.passwordVisible,top:"30vh",width:"30rem","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.passwordVisible=e},open:t.passwordShow,close:t.passwordClose}},[s("el-form",{ref:"passwordForm",attrs:{model:t.passwordForm,rules:t.passwordRules},nativeOn:{submit:function(t){t.preventDefault()}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v(t._s(t.$t("password.password1")))]),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{ref:"inpus",attrs:{type:"password",maxlength:22},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterSubmit("passwordForm")}},model:{value:t.passwordForm.password,callback:function(e){t.$set(t.passwordForm,"password",e)},expression:"passwordForm.password"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.passwordClose}},[t._v(t._s(t.$t("password.password2")))]),s("el-button",{attrs:{type:"success",id:"passwordInfo"},on:{click:function(e){return t.dialogSubmit("passwordForm")}}},[t._v(t._s(t.$t("password.password3"))+"\n    ")])],1)],1)},a=[],n={props:{},data:function(){var t=this,e=function(e,s,r){""===s?r(new Error(t.$t("password.password1"))):r()};return{passwordVisible:!1,passwordForm:{password:""},passwordRules:{password:[{validator:e,trigger:["blur","change"]}]}}},created:function(){},mounted:function(){},watch:{passwordVisible:function(t){var e=this;t&&setTimeout(function(){e.$refs["inpus"].focus()},200)}},methods:{enterSubmit:function(t){this.passwordForm.password&&this.dialogSubmit(t)},passwordShow:function(){},passwordClose:function(){this.$refs["passwordForm"].resetFields(),this.passwordVisible=!1},showPassword:function(t){this.passwordVisible=t},dialogSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$emit("passwordSubmit",e.passwordForm.password),e.passwordVisible=!1})}}},o=n,i=(s("7672"),s("2877")),u=Object(i["a"])(o,r,a,!1,null,null,null);e["a"]=u.exports},e0a2:function(t,e,s){},eb26:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"new_address bg-gray"},[s("div",{staticClass:"bg-white"},[s("div",{staticClass:"w1200"},[s("BackBar",{attrs:{backTitle:t.$t("address.address0")}}),s("h3",{staticClass:"title"},[t._v(t._s(t.$t("setAlias.setAlias0")))])],1)]),s("div",{staticClass:"new w1200 mt_20 bg-white"},[s("div",{staticClass:"w630"},[s("h3",{staticClass:"tc mzt_20"},[t._v(t._s(this.$route.query.address))]),s("div",{staticClass:"tip bg-gray"},[s("p",[t._v("• "+t._s(t.$t("setAlias.setAlias1"))+t._s(t.addressInfo.symbol)+t._s(t.$t("setAlias.setAlias11")))]),s("p",[t._v("• "+t._s(t.$t("setAlias.setAlias2"))+t._s(t.addressInfo.symbol))])]),s("el-form",{ref:"aliasForm",staticClass:"mb_20",attrs:{model:t.aliasForm,"status-icon":"",rules:t.aliasRules}},[s("el-form-item",{attrs:{label:t.$t("public.alias"),prop:"alias"}},[s("span",{staticClass:"balance font12 fr"},[t._v(t._s(t.$t("public.usableBalance"))+"："+t._s(t.addressInfo.balance))]),s("el-input",{attrs:{type:"text",maxlength:"20",autocomplete:"off"},model:{value:t.aliasForm.alias,callback:function(e){t.$set(t.aliasForm,"alias",e)},expression:"aliasForm.alias"}})],1),s("div",{staticClass:"div-data font14"},[t._v("\n          "+t._s(t.$t("public.fee"))+": "),s("label",[t._v("0.001 "),s("span",{staticClass:"fCN"},[t._v(t._s(t.addressInfo.symbol))])])]),s("el-form-item",{staticClass:"form-next"},[s("el-button",{attrs:{type:"success"},on:{click:function(e){return t.submitAliasForm("aliasForm")}}},[t._v(" "+t._s(t.$t("public.next")))])],1),s("div",{staticClass:"tc font18 mzt_20"},[t._v("\n          "+t._s(t.$t("setAlias.setAlias3"))+": 1.001\n        ")])],1)],1)]),s("Password",{ref:"password",on:{passwordSubmit:t.passSubmit}})],1)},a=[],n=(s("96cf"),s("3b8d")),o=(s("ac4d"),s("8a81"),s("ac6a"),s("0ad0")),i=s.n(o),u=s("1959"),c=s("d1f0"),d=s("b301"),l=s("db49"),f=s("6ace"),p={data:function(){var t=this,e=function(e,s,r){var a=/^(?!_)(?!.*?_$)[a-z0-9_]+$/;""===s?r(new Error(t.$t("setAlias.setAlias4"))):a.exec(s)?r():r(new Error(t.$t("setAlias.setAlias5")))};return{aliasForm:{alias:""},aliasRules:{alias:[{validator:e,trigger:"blur"}]},addressInfo:"",balanceInfo:""}},created:function(){var t=!0,e=!1,s=void 0;try{for(var r,a=Object(f["e"])(0)[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var n=r.value;n.address===this.$route.query.address&&(this.addressInfo=n)}}catch(o){e=!0,s=o}finally{try{t||null==a.return||a.return()}finally{if(e)throw s}}this.getNulsBalance(Object(f["f"])(),1,this.$route.query.address)},watch:{addressInfo:function(t,e){t.address!==e.address&&e.address&&(this.transferForm.fromAddress=this.addressInfo.address)}},components:{Password:c["a"],BackBar:d["a"]},methods:{submitAliasForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.balanceInfo.balance>1001e5?e.$refs.password.showPassword(!0):e.$message({message:e.$t("newConsensus.newConsensus7"),type:"error",duration:1e3})})},getNulsBalance:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,s,r){var a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$post("/","getAccountBalance",[e,s,r]).then(function(t){t.hasOwnProperty("result")?a.balanceInfo={balance:t.result.balance,nonce:t.result.nonce}:a.$message({message:a.$t("public.err2")+t,type:"error",duration:1e3})}).catch(function(t){a.$message({message:a.$t("public.err3")+t,type:"error",duration:1e3})});case 2:case"end":return t.stop()}},t,this)}));function e(e,s,r){return t.apply(this,arguments)}return e}(),passSubmit:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var s,r,a,n,o,c,d,p,h=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(s=i.a.decrypteOfAES(this.addressInfo.aesPri,e),r=i.a.importByKey(Object(f["f"])(),s,e),r.address!==this.addressInfo.address){t.next=19;break}return a=i.a.getAddressByPub(Object(f["f"])(),1,l["a"]),n={fromAddress:this.addressInfo.address,toAddress:a,assetsChainId:Object(f["f"])(),assetsId:1,amount:1e8,fee:1e5},t.next=7,Object(u["g"])(n,this.balanceInfo,3);case 7:return o=t.sent,c={fromAddress:this.addressInfo.address,alias:this.aliasForm.alias},t.next=11,i.a.transactionAssemble(o.data.inputs,o.data.outputs,"",3,c);case 11:return d=t.sent,t.next=14,i.a.transactionSerialize(i.a.decrypteOfAES(this.addressInfo.aesPri,e),this.addressInfo.pub,d);case 14:return p=t.sent,t.next=17,Object(u["i"])(p).then(function(t){t.success?h.toUrl("txList"):h.$message({message:h.$t("error."+t.data.code),type:"error",duration:3e3})}).catch(function(t){h.$message({message:h.$t("public.err0")+t,type:"error",duration:1e3})});case 17:t.next=20;break;case 19:this.$message({message:this.$t("address.address13"),type:"error",duration:1e3});case 20:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),toUrl:function(t){this.$router.push({name:t})}}},h=p,b=(s("033b"),s("2877")),m=Object(b["a"])(h,r,a,!1,null,null,null);e["default"]=m.exports},ff03:function(t,e,s){}}]);
//# sourceMappingURL=chunk-186cee8c.69a7f352.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67fcdde4"],{"11e9":function(e,t,r){var s=r("52a7"),a=r("4630"),n=r("6821"),o=r("6a99"),i=r("69a8"),c=r("c69a"),u=Object.getOwnPropertyDescriptor;t.f=r("9e1e")?u:function(e,t){if(e=n(e),t=o(t,!0),c)try{return u(e,t)}catch(r){}if(i(e,t))return a(!s.f.call(e,t),e[t])}},"188a":function(e,t,r){},1959:function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"b",function(){return i}),r.d(t,"d",function(){return c}),r.d(t,"e",function(){return d}),r.d(t,"a",function(){return f});r("96cf");var s=r("3b8d"),a=r("9f30");function n(e){return o.apply(this,arguments)}function o(){return o=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])("/","getAccountBalance",[1,t]).then(function(e){return e.hasOwnProperty("result")?{success:!0,data:{balance:e.result.balance,nonce:e.result.nonce}}:{success:!1,data:e}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),o.apply(this,arguments)}function i(e,t){var r=e.txSerialize().length;return r+=110*t,1e5*Math.ceil(r/1024)}function c(e,t,r){return u.apply(this,arguments)}function u(){return u=Object(s["a"])(regeneratorRuntime.mark(function e(t,r,s){var a,n,o,i,c,u,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.amount+t.fee,n=0,o=r.nonce,i=t.amount,c=0,!(r.balance<t.amount+t.fee)){e.next=7;break}return e.abrupt("return",{success:!1,data:"Your balance is not enough."});case 7:return 4===s?c=-1:5===s?c=-1:6===s?(a=t.amount,n=-1,o=t.depositHash.substring(t.depositHash.length-16),i=t.amount-t.fee):9===s&&(a=t.amount,n=-1,o=t.depositHash.substring(t.depositHash.length-16),i=t.amount-t.fee,c=(new Date).valueOf()+2592e5),u=[{address:t.fromAddress,assetsChainId:t.assetsChainId,assetsId:t.assetsId,amount:a,locked:n,nonce:o}],d=[{address:t.toAddress?t.toAddress:t.fromAddress,assetsChainId:t.assetsChainId,assetsId:t.assetsId,amount:i,lockTime:c}],e.abrupt("return",{success:!0,data:{inputs:u,outputs:d}});case 11:case"end":return e.stop()}},e)})),u.apply(this,arguments)}function d(e){return l.apply(this,arguments)}function l(){return l=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])("/","validateTx",[t]).then(function(e){if(console.log(e),e.hasOwnProperty("result")){var r=e.result.value;return Object(a["a"])("/","broadcastTx",[t]).then(function(e){return e.hasOwnProperty("result")?{success:!0,hash:r}:{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}})}return{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),l.apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return p=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])("/","getConsensusDeposit",[1,100,t]).then(function(e){return e.result}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),p.apply(this,arguments)}},2736:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"new_consensus bg-gray"},[r("div",{staticClass:"bg-white"},[r("div",{staticClass:"w1200"},[r("BackBar",{attrs:{backTitle:"共识"}}),r("h3",{staticClass:"title"},[e._v("创建节点")])],1)]),r("div",{staticClass:"w1200 bg-white mt_20"},[r("el-form",{ref:"createrForm",attrs:{model:e.createrForm,rules:e.createrRules}},[r("el-form-item",{attrs:{label:"创建地址:"}},[r("el-input",{attrs:{disabled:""},model:{value:e.addressInfo.address,callback:function(t){e.$set(e.addressInfo,"address","string"===typeof t?t.trim():t)},expression:"addressInfo.address"}})],1),r("el-form-item",{attrs:{label:"奖励地址:",prop:"rewardAddress"}},[r("el-input",{attrs:{maxlength:"50"},model:{value:e.createrForm.rewardAddress,callback:function(t){e.$set(e.createrForm,"rewardAddress","string"===typeof t?t.trim():t)},expression:"createrForm.rewardAddress"}})],1),r("el-form-item",{attrs:{label:"出块地址:",prop:"blockAddress"}},[r("el-input",{attrs:{maxlength:"50"},model:{value:e.createrForm.blockAddress,callback:function(t){e.$set(e.createrForm,"blockAddress","string"===typeof t?t.trim():t)},expression:"createrForm.blockAddress"}})],1),r("el-form-item",{attrs:{label:"保证金(NULS):",prop:"amount"}},[r("span",{staticClass:"balance font12 fr"},[e._v("可用余额："+e._s(e.addressInfo.balance))]),r("el-input",{model:{value:e.createrForm.amount,callback:function(t){e.$set(e.createrForm,"amount","string"===typeof t?t.trim():t)},expression:"createrForm.amount"}})],1),r("el-form-item",{attrs:{label:"佣金比例(%):",prop:"rate"}},[r("el-input",{model:{value:e.createrForm.rate,callback:function(t){e.$set(e.createrForm,"rate","string"===typeof t?t.trim():t)},expression:"createrForm.rate"}})],1),r("div",{staticClass:"font14"},[r("el-tooltip",{attrs:{placement:"top"}},[r("div",{attrs:{slot:"content"},slot:"content"},[e._v("该手续费值是根据当前NULS网络预估的，实际消耗可能小于该值，多余部分将会通过共识奖励退回")]),r("i",{staticClass:"el-icon-warning"})]),e._v("\n        手续费：0.01 "),r("span",{staticClass:"fCN"},[e._v("NULS")])],1),r("el-form-item",{staticClass:"form-next"},[r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.submitForm("createrForm")}}},[e._v("确 定")])],1)],1)],1),r("Password",{ref:"password",on:{passwordSubmit:e.passSubmit}}),r("el-dialog",{staticClass:"confirm-dialog",attrs:{title:"创建节点确认",visible:e.newConsensusVisible,width:"40rem"},on:{"update:visible":function(t){e.newConsensusVisible=t}}},[r("div",{staticClass:"bg-white"},[r("div",{staticClass:"div-data"},[r("p",[e._v("创建地址：")]),r("label",[e._v(e._s(e.addressInfo.address))])]),r("div",{staticClass:"div-data"},[r("p",[e._v("奖励地址：")]),r("label",[e._v(e._s(e.createrForm.rewardAddress))])]),r("div",{staticClass:"div-data"},[r("p",[e._v("打包地址：")]),r("label",[e._v(e._s(e.createrForm.blockAddress))])]),r("div",{staticClass:"div-data"},[r("p",[e._v("佣金比例：")]),r("label",{staticClass:"yellow"},[e._v(e._s(e.createrForm.rate)+"% "),r("span",{staticClass:"fCN"},[e._v("NULS")])])]),r("div",{staticClass:"div-data"},[r("p",[e._v("手续费：")]),r("label",[e._v("0.001 "),r("span",{staticClass:"fCN"},[e._v("NULS")])])]),r("div",{staticClass:"div-data"},[r("p",[e._v("保证金：")]),r("label",{staticClass:"yellow"},[e._v(e._s(e.createrForm.amount)+" "),r("span",{staticClass:"fCN"},[e._v("NULS")])])])]),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.newConsensusVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"success"},on:{click:e.confiremSubmit}},[e._v("确认提交")])],1)])],1)},a=[],n=(r("6b54"),r("06db"),r("c5f6"),r("96cf"),r("3b8d")),o=r("0ad0"),i=r.n(o),c=r("1959"),u=r("6ace"),d=r("d1f0"),l=r("b301"),f={data:function(){var e=this,t=function(e,t,r){if(!t)return r(new Error("请输入奖励地址"));r()},r=function(t,r,s){return r?r===e.addressInfo.address?s(new Error("打包地址不能为创建地址")):void s():s(new Error("请输入出块地址"))},s=function(t,r,s){var a=/^\d+(?=\.{0,1}\d+$|$)/,n=/^\d{1,8}(\.\d{1,8})?$/,o=e.balanceInfo.balance-1e8*r;if(!r)return s(new Error("请输入保证金"));a.exec(r)&&n.exec(r)?o<.001?s(new Error("对不起，余额不足")):r<2e4||r>5e5?s(new Error("保证金不小于20000并且不大于500000")):s():s(new Error("保证金必须数字值"))},a=function(e,t,r){var s=/^\d+(?=\.{0,1}\d+$|$)/,a=/^\d{1,8}(\.\d{1,8})?$/;if(!t)return r(new Error("请输入佣金比例"));s.exec(t)&&a.exec(t)?t<10||t>100?r(new Error("保证金不小于10并且不大于100")):r():r(new Error("佣金比例必须数字值"))};return{addressInfo:{},balanceInfo:{},createrForm:{rewardAddress:"",blockAddress:"",amount:"",rate:""},createrRules:{rewardAddress:[{validator:t,trigger:["blur","change"]}],blockAddress:[{validator:r,trigger:["blur","change"]}],amount:[{validator:s,trigger:["blur","change"]}],rate:[{validator:a,trigger:["blur","change"]}]},newConsensusVisible:!1}},created:function(){var e=this;this.addressInfo=JSON.parse(sessionStorage.getItem(sessionStorage.key(0))),setInterval(function(){e.addressInfo=JSON.parse(sessionStorage.getItem(sessionStorage.key(0)))},500)},mounted:function(){this.getBalanceByAddress(this.addressInfo.address)},watch:{addressInfo:function(e,t){e&&e.address!==t.address&&t.address&&this.getBalanceByAddress(this.addressInfo.address)}},components:{Password:d["a"],BackBar:l["a"]},methods:{submitForm:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs[t].validate(function(e){if(!e)return!1;r.newConsensusVisible=!0});case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getBalanceByAddress:function(e){var t=this;Object(c["c"])(e).then(function(e){e.success?t.balanceInfo=e.data:t.$message({message:"获取账户余额失败:"+e,type:"error",duration:1e3})}).catch(function(e){t.$message({message:"获取账户余额失败："+e,type:"error",duration:1e3})})},confiremSubmit:function(){this.$refs.password.showPassword(!0)},passSubmit:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,s,a,n,o,d=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r={fromAddress:this.addressInfo.address,assetsChainId:2,assetsId:1,amount:Number(Object(u["c"])(this.createrForm.amount,1e8).toString()),fee:1e5},e.next=3,Object(c["d"])(r,this.balanceInfo,4);case 3:if(s=e.sent,a="",!s.success){e.next=15;break}return n={agentAddress:this.addressInfo.address,packingAddress:this.createrForm.blockAddress,rewardAddress:this.createrForm.rewardAddress,commissionRate:Number(this.createrForm.rate),deposit:Number(Object(u["c"])(this.createrForm.amount,1e8).toString())},e.next=9,i.a.transactionAssemble(s.data.inputs,s.data.outputs,"",4,n);case 9:return o=e.sent,e.next=12,i.a.transactionSerialize(i.a.decrypteOfAES(this.addressInfo.aesPri,t),this.addressInfo.pub,o);case 12:a=e.sent,e.next=16;break;case 15:this.$message({message:"input和outputs组装错误："+s.data,type:"error",duration:1e3});case 16:return e.next=18,Object(c["e"])(a).then(function(e){e.success?d.$router.push({name:"txList"}):d.$message({message:e.data,type:"error",duration:1e3})}).catch(function(e){d.$message({message:"验证并广播交易异常："+e,type:"error",duration:1e3})});case 18:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},p=f,m=(r("b83f"),r("2877")),b=Object(m["a"])(p,s,a,!1,null,null,null);t["default"]=b.exports},"2e64":function(e,t,r){"use strict";var s=r("ff03"),a=r.n(s);a.a},"5dbc":function(e,t,r){var s=r("d3f4"),a=r("8b97").set;e.exports=function(e,t,r){var n,o=t.constructor;return o!==r&&"function"==typeof o&&(n=o.prototype)!==r.prototype&&s(n)&&a&&a(e,n),e}},7672:function(e,t,r){"use strict";var s=r("188a"),a=r.n(s);a.a},"8b97":function(e,t,r){var s=r("d3f4"),a=r("cb7c"),n=function(e,t){if(a(e),!s(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,s){try{s=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),s(e,[]),t=!(e instanceof Array)}catch(a){t=!0}return function(e,r){return n(e,r),t?e.__proto__=r:s(e,r),e}}({},!1):void 0),check:n}},9093:function(e,t,r){var s=r("ce10"),a=r("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return s(e,a)}},a464:function(e,t,r){},aa77:function(e,t,r){var s=r("5ca1"),a=r("be13"),n=r("79e5"),o=r("fdef"),i="["+o+"]",c="​",u=RegExp("^"+i+i+"*"),d=RegExp(i+i+"*$"),l=function(e,t,r){var a={},i=n(function(){return!!o[e]()||c[e]()!=c}),u=a[e]=i?t(f):o[e];r&&(a[r]=u),s(s.P+s.F*i,"String",a)},f=l.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(d,"")),e};e.exports=l},b301:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"back",attrs:{backUrl:e.backUrl}},[r("span",{staticClass:"back-box",on:{click:e.back}},[r("i",{staticClass:"el-icon-arrow-left"}),r("span",[e._v(e._s(e.backTitle))])])])},a=[],n={props:{backTitle:{type:String,default:""},backUrl:{type:String,default:"1"},backParams:{type:String,default:""}},methods:{back:function(){"1"===this.backUrl?this.$router.go(-1):this.$router.push({name:this.backUrl})}}},o=n,i=(r("2e64"),r("2877")),c=Object(i["a"])(o,s,a,!1,null,null,null);t["a"]=c.exports},b83f:function(e,t,r){"use strict";var s=r("a464"),a=r.n(s);a.a},c5f6:function(e,t,r){"use strict";var s=r("7726"),a=r("69a8"),n=r("2d95"),o=r("5dbc"),i=r("6a99"),c=r("79e5"),u=r("9093").f,d=r("11e9").f,l=r("86cc").f,f=r("aa77").trim,p="Number",m=s[p],b=m,h=m.prototype,v=n(r("2aeb")(h))==p,w="trim"in String.prototype,g=function(e){var t=i(e,!1);if("string"==typeof t&&t.length>2){t=w?t.trim():f(t,3);var r,s,a,n=t.charCodeAt(0);if(43===n||45===n){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+t}for(var o,c=t.slice(2),u=0,d=c.length;u<d;u++)if(o=c.charCodeAt(u),o<48||o>a)return NaN;return parseInt(c,s)}}return+t};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof m&&(v?c(function(){h.valueOf.call(r)}):n(r)!=p)?o(new b(g(t)),r,m):g(t)};for(var _,k=r("9e1e")?u(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),y=0;k.length>y;y++)a(b,_=k[y])&&!a(m,_)&&l(m,_,d(b,_));m.prototype=h,h.constructor=m,r("2aba")(s,p,m)}},d1f0:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"password-dialog",attrs:{title:"密码",visible:e.passwordVisible,top:"30vh",width:"30rem","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.passwordVisible=t},open:e.passwordShow,close:e.passwordClose}},[r("el-form",{ref:"passwordForm",attrs:{model:e.passwordForm,rules:e.passwordRules},nativeOn:{submit:function(e){e.preventDefault()}}},[r("div",[e._v("请输入密码")]),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{ref:"inpus",attrs:{type:"password",maxlength:22},model:{value:e.passwordForm.password,callback:function(t){e.$set(e.passwordForm,"password",t)},expression:"passwordForm.password"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.passwordClose}},[e._v("取 消")]),r("el-button",{attrs:{type:"success",id:"passwordInfo"},on:{click:function(t){return e.dialogSubmit("passwordForm")}}},[e._v("确 定")])],1)],1)},a=[],n={props:{},data:function(){var e=function(e,t,r){""===t?r(new Error("请输入密码")):r()};return{passwordVisible:!1,passwordForm:{password:""},passwordRules:{password:[{validator:e,trigger:["blur","change"]}]}}},mounted:function(){},watch:{passwordVisible:function(e){e&&setTimeout(function(){},200)}},methods:{passwordShow:function(){},passwordClose:function(){this.$refs["passwordForm"].resetFields(),this.passwordVisible=!1},showPassword:function(e){this.passwordVisible=e},dialogSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$emit("passwordSubmit",t.passwordForm.password),t.passwordVisible=!1})}}},o=n,i=(r("7672"),r("2877")),c=Object(i["a"])(o,s,a,!1,null,null,null);t["a"]=c.exports},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},ff03:function(e,t,r){}}]);
//# sourceMappingURL=chunk-67fcdde4.b7868e1d.js.map
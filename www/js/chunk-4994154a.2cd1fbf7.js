(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4994154a"],{2864:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"node_service bg-gray",attrs:{"element-loading-text":"节点切换中...."}},[a("h3",{staticClass:"title"},[e._v("节点服务列表")]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.nodeServiceLoading,expression:"nodeServiceLoading"}],staticClass:"w1200 mt_20"},[a("div",{staticClass:"top_ico"},[a("i",{staticClass:"el-icon-plus click",on:{click:e.addNodeService}})]),a("el-table",{attrs:{data:e.nodeServiceData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),a("el-table-column",{attrs:{prop:"urls",label:"地址",align:"center"}}),a("el-table-column",{attrs:{prop:"delay",label:"延迟",align:"center"}}),a("el-table-column",{attrs:{prop:"state",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{on:{click:function(a){return e.editState(t.$index)}}},[a("i",{staticClass:"iconfont clicks",class:0===t.row.state?"iconduankailianjie flan":"iconziyuan fCN"})])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isDelete?a("div",[a("label",{staticClass:"click tab_bn",on:{click:function(a){return e.edit(t.$index)}}},[e._v("修改")]),a("span",{staticClass:"tab_line"},[e._v("|")]),a("label",{staticClass:"click tab_bn",on:{click:function(a){return e.removeUrl(t.$index)}}},[e._v("移除")])]):e._e()]}}])})],1)],1),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.nodeServiceDialogLoading,expression:"nodeServiceDialogLoading"}],attrs:{title:"添加节点服务地址",width:"40%",visible:e.nodeServiceDialog,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.nodeServiceDialog=t}}},[a("span",[e._v("您输入的非官方地址可能无法正常使用，因此造成的损失将由您自己承担")]),a("div",{staticClass:"bg-white"},[a("el-form",{ref:"nodeServiceForm",attrs:{model:e.nodeServiceForm,"status-icon":"",rules:e.nodeServiceRules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.nodeServiceForm.name,callback:function(t){e.$set(e.nodeServiceForm,"name",e._n(t))},expression:"nodeServiceForm.name"}})],1),a("el-form-item",{attrs:{label:"服务地址",prop:"urls"}},[a("el-input",{attrs:{type:"text",autocomplete:"off",maxlength:"50"},model:{value:e.nodeServiceForm.urls,callback:function(t){e.$set(e.nodeServiceForm,"urls",t)},expression:"nodeServiceForm.urls"}})],1),a("el-form-item",{staticClass:"btns tl"},[a("el-button",{staticClass:"fl",attrs:{type:"success"},on:{click:function(t){return e.testSubmitForm("nodeServiceForm")}}},[e._v("测试连接")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.testInfo,expression:"testInfo"}],staticClass:"fl ml_50"},[a("i",{class:"0"===e.testInfo?"el-icon-circle-check fCN":"el-icon-circle-close fred"}),e._v(" \n                        "),a("span",{directives:[{name:"show",rawName:"v-show",value:"0"!==e.testInfo,expression:"testInfo !== '0'"}],staticClass:"fred font12"},[e._v(e._s(e.testInfo))])])],1),a("el-form-item",[a("el-checkbox",{model:{value:e.nodeServiceForm.resource,callback:function(t){e.$set(e.nodeServiceForm,"resource",t)},expression:"nodeServiceForm.resource"}},[e._v("立即使用")])],1),a("el-form-item",{staticClass:"btns tc"},[a("el-button",{on:{click:function(t){return e.resetForm("nodeServiceForm")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.submitForm("nodeServiceForm")}}},[e._v("确 定")])],1),a("div",{staticClass:"cb"})],1)],1)])],1)},r=[],i=(a("7f7f"),a("ac6a"),a("96cf"),a("3b8d")),o=a("5d73"),s=a.n(o),c=a("f499"),l=a.n(c),u=a("bc3a"),d=a.n(u),v={data:function(){var e=function(e,t,a){if(!t)return a(new Error("名称不能为空"));a()},t=function(e,t,a){var n=/(http|https):\/\/([\w.]+\/?)\S*/;""===t?a(new Error("地址不能为空")):n.exec(t)?a():a(new Error("请输入正确的连接地址"))};return{loading:!1,defaultData:[{name:"官方",urls:"http://apitn1.nulscan.io/",delay:"10ms",state:0,isDelete:!1},{name:"官方",urls:"http://apitn2.nulscan.io/",delay:"10ms",state:1,isDelete:!1}],nodeServiceData:[],nodeServiceLoading:!0,nodeServiceDialog:!1,nodeServiceDialogLoading:!1,nodeServiceForm:{name:"",urls:"",resource:!1},nodeServiceRules:{name:[{validator:e,trigger:"blur"}],urls:[{validator:t,trigger:"blur"}]},testInfo:"",editIndex:1e4}},created:function(){var e=this;this.nodeServiceData=localStorage.hasOwnProperty("urlsData")?JSON.parse(localStorage.getItem("urlsData")):this.defaultData,setInterval(function(){e.nodeServiceData=localStorage.hasOwnProperty("urlsData")?JSON.parse(localStorage.getItem("urlsData")):e.defaultData},500)},mounted:function(){this.getDelay()},methods:{editState:function(e){var t=this;if("连接失败"===this.nodeServiceData[e].delay||"请求超时"===this.nodeServiceData[e].delay)this.$message({message:"节点不可以连接",type:"error",duration:1e3});else if(0===this.nodeServiceData[e].state){this.loading=!0;var a=!0,n=!1,r=void 0;try{for(var i,o=s()(this.nodeServiceData);!(a=(i=o.next()).done);a=!0){var c=i.value;c.state=0}}catch(u){n=!0,r=u}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}this.nodeServiceData[e].state=1,localStorage.setItem("urls",l()(this.nodeServiceData[e])),localStorage.setItem("urlsData",l()(this.nodeServiceData)),setTimeout(function(){t.loading=!1},2e3)}},getDelay:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r,i,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=[],a=!0,n=!1,r=void 0,e.prev=4,i=regeneratorRuntime.mark(function e(){var a,n,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=c.value,1===a.state&&localStorage.setItem("urls",l()(a)),n=(new Date).valueOf(),r=0,i={jsonrpc:"2.0",method:"getBestBlockHeader",params:[2],id:5898},e.next=7,d.a.post(a.urls,i).then(function(e){e.data.hasOwnProperty("result")?(r=(new Date).valueOf(),a.delay=r-n+"ms"):a.delay="请求超时"}).catch(function(e){a.delay="连接失败",console.log(a.urls+" getBestBlockHeader:"+e)});case 7:t.push(a);case 8:case"end":return e.stop()}},e)}),o=s()(this.nodeServiceData);case 7:if(a=(c=o.next()).done){e.next=12;break}return e.delegateYield(i(),"t0",9);case 9:a=!0,e.next=7;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e["catch"](4),n=!0,r=e.t1;case 18:e.prev=18,e.prev=19,a||null==o.return||o.return();case 21:if(e.prev=21,!n){e.next=24;break}throw r;case 24:return e.finish(21);case 25:return e.finish(18);case 26:this.nodeServiceData=t,this.nodeServiceLoading=!1,localStorage.setItem("urlsData",l()(this.nodeServiceData));case 29:case"end":return e.stop()}},e,this,[[4,14,18,26],[19,,21,25]])}));function t(){return e.apply(this,arguments)}return t}(),testSubmitForm:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=this,this.$refs[t].validate(function(e){if(!e)return!1;a.nodeServiceDialogLoading=!0;var t={jsonrpc:"2.0",method:"getBestBlockHeader",params:[2],id:5898};d.a.post(n.nodeServiceForm.urls,t).then(function(e){e.data.hasOwnProperty("result")?(a.testInfo="0",a.nodeServiceDialogLoading=!1):(a.testInfo=e.data,a.nodeServiceDialogLoading=!1)}).catch(function(e){console.log("getBestBlockHeader:"+e),a.testInfo=e,a.nodeServiceDialogLoading=!1})});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),addNodeService:function(){this.nodeServiceDialog=!0},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;var n={name:t.nodeServiceForm.name,urls:t.nodeServiceForm.urls,delay:"",state:0,isDelete:!0};if(t.nodeServiceForm.resource){for(var r in t.nodeServiceData)1===t.nodeServiceData[r].state&&(t.nodeServiceData[r].state=0);n.state=1}1e4!==t.editIndex?(t.nodeServiceData[t.editIndex]=n,localStorage.setItem("urlsData",l()(t.nodeServiceData))):(t.nodeServiceData.push(n),localStorage.setItem("urlsData",l()(t.nodeServiceData))),t.getDelay(),t.nodeServiceDialog=!1,t.$refs[e].resetFields()})},resetForm:function(e){this.nodeServiceDialog=!1,this.$refs[e].resetFields()},edit:function(e){this.editIndex=e,this.nodeServiceForm=this.nodeServiceData[e],this.nodeServiceDialog=!0},removeUrl:function(e){var t=this;this.$confirm("此操作将移除"+this.nodeServiceData[e].urls+"节点服务是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"移除成功!"}),t.nodeServiceData.splice(e,1),localStorage.setItem("urlsData",l()(t.nodeServiceData))}).catch(function(){})},toUrl:function(e){this.$router.push({name:e})}}},f=v,m=(a("2fed"),a("2877")),S=Object(m["a"])(f,n,r,!1,null,null,null);t["default"]=S.exports},"2fed":function(e,t,a){"use strict";var n=a("d2ac"),r=a.n(n);r.a},"7f7f":function(e,t,a){var n=a("86cc").f,r=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in r||a("9e1e")&&n(r,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},ac6a:function(e,t,a){for(var n=a("cadf"),r=a("0d58"),i=a("2aba"),o=a("7726"),s=a("32e9"),c=a("84f2"),l=a("2b4c"),u=l("iterator"),d=l("toStringTag"),v=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=r(f),S=0;S<m.length;S++){var g,p=m[S],h=f[p],D=o[p],b=D&&D.prototype;if(b&&(b[u]||s(b,u,v),b[d]||s(b,d,p),c[p]=v,h))for(g in n)b[g]||i(b,g,n[g],!0)}},d2ac:function(e,t,a){}}]);
//# sourceMappingURL=chunk-4994154a.2cd1fbf7.js.map
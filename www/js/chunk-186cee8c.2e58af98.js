(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-186cee8c"],{"033b":function(t,e,s){"use strict";var a=s("e0a2"),r=s.n(a);r.a},"188a":function(t,e,s){},1959:function(t,e,s){"use strict";s.d(e,"c",function(){return n}),s.d(e,"b",function(){return i}),s.d(e,"d",function(){return c}),s.d(e,"e",function(){return l}),s.d(e,"a",function(){return f});s("96cf");var a=s("3b8d"),r=s("9f30");function n(t){return o.apply(this,arguments)}function o(){return o=Object(a["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["a"])("/","getAccountBalance",[1,e]).then(function(t){return t.hasOwnProperty("result")?{success:!0,data:{balance:t.result.balance,nonce:t.result.nonce}}:{success:!1,data:t}}).catch(function(t){return{success:!1,data:t}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),o.apply(this,arguments)}function i(t,e){var s=t.txSerialize().length;return s+=110*e,1e5*Math.ceil(s/1024)}function c(t,e,s){return u.apply(this,arguments)}function u(){return u=Object(a["a"])(regeneratorRuntime.mark(function t(e,s,a){var r,n,o,i,c,u,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.amount+e.fee,n=0,o=s.nonce,i=e.amount,c=0,!(s.balance<e.amount+e.fee)){t.next=7;break}return t.abrupt("return",{success:!1,data:"Your balance is not enough."});case 7:return 4===a?c=-1:5===a?c=-1:6===a?(r=e.amount,n=-1,o=e.depositHash.substring(e.depositHash.length-16),i=e.amount-e.fee):9===a&&(r=e.amount,n=-1,o=e.depositHash.substring(e.depositHash.length-16),i=e.amount-e.fee,c=(new Date).valueOf()+2592e5),u=[{address:e.fromAddress,assetsChainId:e.assetsChainId,assetsId:e.assetsId,amount:r,locked:n,nonce:o}],l=[{address:e.toAddress?e.toAddress:e.fromAddress,assetsChainId:e.assetsChainId,assetsId:e.assetsId,amount:i,lockTime:c}],t.abrupt("return",{success:!0,data:{inputs:u,outputs:l}});case 11:case"end":return t.stop()}},t)})),u.apply(this,arguments)}function l(t){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["a"])("/","validateTx",[e]).then(function(t){if(console.log(t),t.hasOwnProperty("result")){var s=t.result.value;return Object(r["a"])("/","broadcastTx",[e]).then(function(t){return t.hasOwnProperty("result")?{success:!0,hash:s}:{success:!1,data:t.error}}).catch(function(t){return{success:!1,data:t}})}return{success:!1,data:t.error}}).catch(function(t){return{success:!1,data:t}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),d.apply(this,arguments)}function f(t){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["a"])("/","getConsensusDeposit",[1,100,e]).then(function(t){return t.result}).catch(function(t){return{success:!1,data:t}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),p.apply(this,arguments)}},"2e64":function(t,e,s){"use strict";var a=s("ff03"),r=s.n(a);r.a},7672:function(t,e,s){"use strict";var a=s("188a"),r=s.n(a);r.a},b301:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"back",attrs:{backUrl:t.backUrl}},[s("span",{staticClass:"back-box",on:{click:t.back}},[s("i",{staticClass:"el-icon-arrow-left"}),s("span",[t._v(t._s(t.backTitle))])])])},r=[],n={props:{backTitle:{type:String,default:""},backUrl:{type:String,default:"1"},backParams:{type:String,default:""}},methods:{back:function(){"1"===this.backUrl?this.$router.go(-1):this.$router.push({name:this.backUrl})}}},o=n,i=(s("2e64"),s("2877")),c=Object(i["a"])(o,a,r,!1,null,null,null);e["a"]=c.exports},d1f0:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{staticClass:"password-dialog",attrs:{title:"密码",visible:t.passwordVisible,top:"30vh",width:"30rem","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.passwordVisible=e},open:t.passwordShow,close:t.passwordClose}},[s("el-form",{ref:"passwordForm",attrs:{model:t.passwordForm,rules:t.passwordRules},nativeOn:{submit:function(t){t.preventDefault()}}},[s("div",[t._v("请输入密码")]),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{ref:"inpus",attrs:{type:"password",maxlength:22},model:{value:t.passwordForm.password,callback:function(e){t.$set(t.passwordForm,"password",e)},expression:"passwordForm.password"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.passwordClose}},[t._v("取 消")]),s("el-button",{attrs:{type:"success",id:"passwordInfo"},on:{click:function(e){return t.dialogSubmit("passwordForm")}}},[t._v("确 定")])],1)],1)},r=[],n={props:{},data:function(){var t=function(t,e,s){""===e?s(new Error("请输入密码")):s()};return{passwordVisible:!1,passwordForm:{password:""},passwordRules:{password:[{validator:t,trigger:["blur","change"]}]}}},mounted:function(){},watch:{passwordVisible:function(t){t&&setTimeout(function(){},200)}},methods:{passwordShow:function(){},passwordClose:function(){this.$refs["passwordForm"].resetFields(),this.passwordVisible=!1},showPassword:function(t){this.passwordVisible=t},dialogSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$emit("passwordSubmit",e.passwordForm.password),e.passwordVisible=!1})}}},o=n,i=(s("7672"),s("2877")),c=Object(i["a"])(o,a,r,!1,null,null,null);e["a"]=c.exports},e0a2:function(t,e,s){},eb26:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"new_address bg-gray"},[s("div",{staticClass:"bg-white"},[s("div",{staticClass:"w1200"},[s("BackBar",{attrs:{backTitle:"地址管理"}}),s("h3",{staticClass:"title"},[t._v("设置别名")])],1)]),s("div",{staticClass:"new w1200 mt_20 bg-white"},[s("div",{staticClass:"w630"},[s("h3",{staticClass:"tc mzt_20"},[t._v(t._s(this.$route.query.address))]),t._m(0),s("el-form",{ref:"aliasForm",staticClass:"mb_20",attrs:{model:t.aliasForm,"status-icon":"",rules:t.aliasRules}},[s("el-form-item",{attrs:{label:"别名",prop:"alias"}},[s("span",{staticClass:"balance font12 fr"},[t._v("可用余额："+t._s(t.addressInfo.balance))]),s("el-input",{attrs:{type:"text",maxlength:"20",autocomplete:"off"},model:{value:t.aliasForm.alias,callback:function(e){t.$set(t.aliasForm,"alias",e)},expression:"aliasForm.alias"}})],1),s("div",{staticClass:"div-data font14"},[t._v("\n          手续费: "),s("label",[t._v("0.001 "),s("span",{staticClass:"fCN"},[t._v("NULS")])])]),s("el-form-item",{staticClass:"form-next"},[s("el-button",{attrs:{type:"success"},on:{click:function(e){return t.submitAliasForm("aliasForm")}}},[t._v("下一步")])],1),s("div",{staticClass:"tc font18 mzt_20"},[t._v("\n          总花费: 1.001\n        ")])],1)],1)]),s("Password",{ref:"password",on:{passwordSubmit:t.passSubmit}})],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tip bg-gray"},[s("p",[t._v("• 别名可作为NULS转账的收款人，为了账户安全，别名设置确定后，将无法修改，请谨慎操作。")]),s("p",[t._v("• 设置别名需要花费1个NULS")])])}],n=(s("96cf"),s("3b8d")),o=s("0ad0"),i=s.n(o),c=s("1959"),u=s("d1f0"),l=s("b301"),d={data:function(){var t=function(t,e,s){var a=/^(?!_)(?!.*?_$)[a-z0-9_]+$/;""===e?s(new Error("请输入别名")):a.exec(e)?s():s(new Error("请输入别名(只允许使用小写字母、数字、下划线（下划线不能在两端）)"))};return{aliasForm:{alias:""},aliasRules:{alias:[{validator:t,trigger:"blur"}]},addressInfo:"",balanceInfo:""}},created:function(){this.addressInfo=JSON.parse(localStorage.getItem(this.$route.query.address)),this.getNulsBalance(1,this.$route.query.address)},watch:{addressInfo:function(t,e){t.address!==e.address&&e.address&&(this.transferForm.fromAddress=this.addressInfo.address)}},components:{Password:u["a"],BackBar:l["a"]},methods:{submitAliasForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.balanceInfo.balance>1001e5?e.$refs.password.showPassword(!0):e.$message({message:"对不起，获取账户余额不足!",type:"error",duration:1e3})})},getNulsBalance:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,s,a=this,r=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,s=r.length>1?r[1]:void 0,t.next=4,this.$post("/","getAccountBalance",[e,s]).then(function(t){t.hasOwnProperty("result")?a.balanceInfo={balance:t.result.balance,nonce:t.result.nonce}:a.$message({message:"获取账户余额失败:"+t,type:"error",duration:1e3})}).catch(function(t){a.$message({message:"获取账户余额失败："+t,type:"error",duration:1e3})});case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),passSubmit:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var s,a,r,n,o,u,l,d=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(s=i.a.decrypteOfAES(this.addressInfo.aesPri,e),a=i.a.importByKey(2,s,e),a.address!==this.addressInfo.address){t.next=18;break}return r={fromAddress:this.addressInfo.address,toAddress:"tNULSeBaMkqeHbTxwKqyquFcbewVTUDHPkF11o",assetsChainId:2,assetsId:1,amount:1e8,fee:1e5},t.next=6,Object(c["d"])(r,this.balanceInfo,3);case 6:return n=t.sent,o={fromAddress:this.addressInfo.address,alias:this.aliasForm.alias},t.next=10,i.a.transactionAssemble(n.data.inputs,n.data.outputs,"",3,o);case 10:return u=t.sent,t.next=13,i.a.transactionSerialize(i.a.decrypteOfAES(this.addressInfo.aesPri,e),this.addressInfo.pub,u);case 13:return l=t.sent,t.next=16,Object(c["e"])(l).then(function(t){t.success?d.toUrl("txList"):d.$message({message:"验证并广播交易错误："+t.data,type:"error",duration:1e3})}).catch(function(t){d.$message({message:"验证并广播交易异常："+t,type:"error",duration:1e3})});case 16:t.next=19;break;case 18:this.$message({message:"对不起，密码错误",type:"error",duration:1e3});case 19:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),toUrl:function(t){this.$router.push({name:t})}}},f=d,p=(s("033b"),s("2877")),h=Object(p["a"])(f,a,r,!1,null,null,null);e["default"]=h.exports},ff03:function(t,e,s){}}]);
//# sourceMappingURL=chunk-186cee8c.2e58af98.js.map